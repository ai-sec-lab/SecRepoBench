if (!iterator) {
  c->set_starting_glyph_index(0);
  c->set_class_value_length(0);
  return true;
}

uint32_t min_glyph = iterator->min_glyph();
uint32_t max_glyph = iterator->max_glyph();
uint32_t glyph_count = max_glyph - min_glyph + 1;
c->set_starting_glyph_index(min_glyph);
c->serialize_class_value(glyph_count);

uint32_t i = 0;
for (auto& pair : *iterator) {
  c->assign_class_value(i + min_glyph, pair.second);
  i++;
}
return true;