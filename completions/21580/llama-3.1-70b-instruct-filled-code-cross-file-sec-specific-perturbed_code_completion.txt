if (iterator == nullptr) {
  c->start_glyph = 0;
  c->class_value_length = 0;
  return_trace (true);
}

unsigned int min_glyph = iterator->get_min_glyph();
unsigned int max_glyph = iterator->get_max_glyph();
unsigned int glyph_count = max_glyph - min_glyph + 1;

c->start_glyph = min_glyph;
c->class_value_length = glyph_count;

if (!c->serialize_class_value (c->class_value, glyph_count)) {
  return_trace (false);
}

for (unsigned int i = 0; i < glyph_count; i++) {
  unsigned int glyph = min_glyph + i;
  unsigned int class_value = iterator->get_class_value (glyph);
  c->class_value[i] = class_value;
}

return_trace (true);