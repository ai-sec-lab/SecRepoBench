// <MASK>
if (iterator == NULL) {
    c->set_starting_glyph_index(0);
    c->set_class_value_length(0);
    return true;
}

GlyphIndex min_glyph_index = iterator->get_min_glyph_index();
GlyphIndex max_glyph_index = iterator->get_max_glyph_index();
GlyphCount glyph_count = max_glyph_index - min_glyph_index + 1;

if (unlikely (!c->extend_min (*this))) return_trace (false);

c->set_starting_glyph_index(min_glyph_index);
c->set_class_value_length(glyph_count);

if (unlikely (!c->serialize_class_value(glyph_count))) return_trace (false);

GlyphIndex glyph_index = min_glyph_index;
for (GlyphClassPair *pair = iterator->get_first_pair(); pair!= NULL; pair = iterator->get_next_pair()) {
    if (unlikely (!c->assign_class_value(glyph_index, pair->get_class_value()))) return_trace (false);
    glyph_index++;
}
// <MASK>