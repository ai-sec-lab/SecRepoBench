// If 'avar' data is available, remap the normalized value using the segment maps.
// Set the normalized value in the plan's axes location and coordinates.
// If the normalized value is not zero, mark the plan as not pinned at default.
// Update segment maps for 'avar' for the next axis, if applicable.
if (has_avar)
{
  const OT::SegmentMaps *seg_maps = fontface->table.avar->get_segment_maps ();
  for (unsigned i = 0; i < axes.length; i++)
  {
    if (plan->user_axes_location.has (i))
    {
      float normalized_value = axes[i].get_normalized_value (plan->user_axes_location.get (i));
      if (seg_maps->has_segment_map (i))
      {
        normalized_value = seg_maps->get_segment_map (i)->remap (normalized_value);
      }
      plan->normalized_coords[i] = normalized_value;
      if (normalized_value!= 0)
        plan->all_axes_pinned = false;
    }
  }
  fontface->table.avar->update_segment_maps (seg_maps, axes.length);
}
else
{
  for (unsigned i = 0; i < axes.length; i++)
  {
    if (plan->user_axes_location.has (i))
    {
      plan->normalized_coords[i] = axes[i].get_normalized_value (plan->user_axes_location.get (i));
      if (plan->normalized_coords[i]!= 0)
        plan->all_axes_pinned = false;
    }
  }
}