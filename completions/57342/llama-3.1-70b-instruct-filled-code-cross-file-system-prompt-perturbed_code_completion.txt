bool axis_not_pinned = false;
unsigned axis_index = 0;
for (hb_codepoint_t axis : axes) {
  hb_tag_t tag = axis.axisTag;
  plan->old_to_tag_map.set (axis_index, tag);
  if (plan->user_axes_location.has (tag)) {
    float value = plan->user_axes_location.get (tag);
    float normalized_value = value;
    if (has_avar) {
      if (!seg_maps) {
        seg_maps = &fontface->table.avar->get_segment_maps (axis_index);
      }
      normalized_value = seg_maps->remap (value);
      seg_maps = seg_maps->next;
    }
    plan->normalized_coords[axis_index] = normalized_value;
    if (normalized_value!= 0) {
      plan->pinned_at_default = false;
    }
  } else {
    plan->normalized_coords[axis_index] = 0;
    axis_not_pinned = true;
  }
  axis_index++;
}