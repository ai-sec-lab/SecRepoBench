bool axis_not_pinned = false;
unsigned axis_index = 0;
for (hb_codepoint_t axis : axes) {
  unsigned old_index = axis_index;
  plan->old_to_tag_map.set (old_index, axis.axisTag);
  if (plan->user_axes_location.has (axis.axisTag)) {
    float value = plan->user_axes_location.get (axis.axisTag);
    float normalized_value = value;
    if (has_avar) {
      if (seg_maps) {
        seg_maps->remap_value (axis.axisTag, &normalized_value);
      } else {
        seg_maps = fontface->table.avar->get_segment_map (axis.axisTag);
      }
    }
    plan->normalized_coords.set (axis_index, normalized_value);
    if (normalized_value!= 0) {
      plan->pinned_at_default = false;
    }
  } else {
    axis_not_pinned = true;
    plan->normalized_coords.set (axis_index, 0);
  }
  axis_index++;
}