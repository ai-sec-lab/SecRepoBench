/*
        Store the XMP profile.
      */
      (void) ReadProfile(img,"xmp",profile,(ssize_t) length,exception);
      /*
        Check whether the XMP packet identifies the image as a DNG
        digital-negative.  When the pattern is found we simply change the
        image format tag to "DNG" so that subsequent processing recognises it
        correctly.
      */
      {
        static const char
          pattern[] = "dc:format=\"image/dng\"";

        const unsigned char
          *p;

        if (length >= (sizeof(pattern)-1))
          {
            for (p=profile; p <= profile+length-(sizeof(pattern)-1); p++)
              if (memcmp(p,pattern,sizeof(pattern)-1) == 0)
                {
                  (void) CopyMagickString(img->magick,"DNG",
                    MagickPathExtent);
                  break;
                }
          }
      }