char
        *xmp_profile;

      StringInfo
        *profile_info;

      /*
        The XMP profile is read from the TIFF image and stored in memory. Then it is checked
        if it contains the string "dc:format=\"image/dng\"". If it does, the image format
        is set to "DNG".
      */
      profile_info=AcquireStringInfo(length);
      SetStringInfoDatum(profile_info,profile);
      xmp_profile=GetStringInfoDatum(profile_info);
      if (xmp_profile != (char *) NULL) {
        if (strstr(xmp_profile,"dc:format=\"image/dng\"") != (char *) NULL)
          SetImageFormat(image,"DNG",exception);
      }
      profile_info=DestroyStringInfo(profile_info);
      (void) ReadProfile(image,"xmp",profile,(ssize_t) length,exception);