char
  *xmp_profile;

xmp_profile=(char *) NULL;
if (length > 2)
  xmp_profile=(char *) AcquireQuantumMemory(length-2,sizeof(*xmp_profile));
if (xmp_profile != (char *) NULL)
  {
    (void) memcpy(xmp_profile,(char *) profile+2,length-2);
    (void) ReadProfile(image,"xmp",xmp_profile,(size_t) length-2,exception);
    xmp_profile=(char *) RelinquishMagickMemory(xmp_profile);
    if (strstr(xmp_profile,"dc:format=\"image/dng\"") != (char *) NULL)
      (void) SetImageFormat(image,"DNG");
  }