if ((TIFFGetField(tiff,TIFFTAG_XMLPACKET,&length,&profile) == 1) &&
    (profile!= (unsigned char *) NULL))
{
  const char
    *dng_format = "dc:format=\"image/dng\"";

  size_t
    dng_format_length = strlen(dng_format);

  if (length >= dng_format_length)
  {
    if (memcmp(profile,dng_format,dng_format_length) == 0)
      (void) SetImageFormat(image,"DNG");
  }
}