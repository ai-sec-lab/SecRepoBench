if (b->uncomp_size < s->hdr->ref_seq_span) {
                hts_log_error("Embedded reference is smaller than expected at #%d:%"PRId64"-%"PRId64,
                              ref_id, s->hdr->ref_seq_start,
                              s->hdr->ref_seq_start + s->hdr->ref_seq_span - 1);
                return -1;
            }

            // Assign the decompressed reference sequence to the slice's reference.
            s->ref = b->data; // Assuming b->data holds the decompressed reference sequence.
            s->ref_start = s->hdr->ref_seq_start;
            s->ref_end = s->hdr->ref_seq_start + s->hdr->ref_seq_span - 1;

            // Ensure that the reference sequence is valid and within bounds.
            if (s->ref_start < 0 || s->ref_end < s->ref_start) {
                hts_log_error("Invalid reference start or end position at #%d:%"PRId64"-%"PRId64,
                              ref_id, s->hdr->ref_seq_start,
                              s->hdr->ref_seq_start + s->hdr->ref_seq_span - 1);
                return -1;
            }