// Assign the decompressed data from the block as the reference sequence for the slice.
// Set the start and end positions of this reference sequence based on the slice header.
// Check if the embedded reference is smaller than expected by comparing the slice's reference
// span with the decompressed block size. Log an error and return -1 if the reference is too small.
cram_block *b = cram_get_block_by_id(s, s->hdr->ref_base_id);
if (b->uncomp_size < s->hdr->ref_seq_span) {
    hts_log_error("Embedded reference is smaller than expected at #%d:%"PRId64"-%"PRId64,
                  ref_id, s->hdr->ref_seq_start,
                  s->hdr->ref_seq_start + s->hdr->ref_seq_span - 1);
    return -1;
}
s->ref = (char *)b->data;
s->ref_start = s->hdr->ref_seq_start;
s->ref_end = s->hdr->ref_seq_start + s->hdr->ref_seq_span - 1;