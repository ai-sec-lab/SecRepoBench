if (slen == 0) return 0;

const char *sptr = (const char*)src;
const char *sptr0 = sptr;

if (count == -1) {
  count = slen * 8;
}

mrb_value dst = mrb_str_new(mrb, NULL, count);