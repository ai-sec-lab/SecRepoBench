{
  /* In CFF charsets glyph 0 (.notdef) is always SID 0. */
  mapping->set (0u, 0u);

  unsigned int glyph = 1;
  unsigned int num_ranges = ranges.len;

  for (unsigned int r = 0; r < num_ranges && glyph < glyph_count; ++r)
  {
    const auto &range = ranges[r];

    hb_codepoint_t sid_start = range.first;           /* First SID in this range  */
    unsigned int range_len   = range.n_left + 1;      /* Number of SIDs covered   */

    for (unsigned int i = 0; i < range_len && glyph < glyph_count; ++i)
      mapping->set (glyph++, sid_start + i);
  }
}