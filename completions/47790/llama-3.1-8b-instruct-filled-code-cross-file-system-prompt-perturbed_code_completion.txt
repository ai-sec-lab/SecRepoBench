for (size_t i = 0; i < glyph_count; ++i) {
  const hb_range_t *range = mapping->ranges + i;
  unsigned int start_sid = range->start;
  unsigned int sid_count = range->end - start_sid + 1;
  for (unsigned int j = 0; j < sid_count; ++j) {
    unsigned int sid = start_sid + j;
    mapping->glyphs[sid] = i;
  }
}