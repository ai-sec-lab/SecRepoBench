#ifdef MRB_USE_BIGINT
  if (mrb_bigint_p(v1)) {
    if (mrb_bigint_p(v2)) {
      return mrb_bint_cmp(mrb, v1, v2);
    }
    else {
      mrb_value big_v2 = mrb_bint_new_int(mrb, mrb_integer(v2));
      return mrb_bint_cmp(mrb, v1, big_v2);
    }
  }
  else if (mrb_bigint_p(v2)) {
    mrb_value big_v1 = mrb_bint_new_int(mrb, mrb_integer(v1));
    return mrb_bint_cmp(mrb, big_v1, v2);
  }
#endif