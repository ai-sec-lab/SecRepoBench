// This code snippet checks if the object's size is valid and within the bounds of the data, adjusting it if necessary.
// It extracts any unknown remaining data if the object size doesn't match the current data position and logs errors if issues are found.
if (obj->size > 0 && obj->size < 0xFFFFFFFF)
{
    size_t obj_end = oldpos + obj->size;
    if (obj_end > dat->size)
    {
        LOG_ERROR("Object size exceeds data size at offset 0x%zx", oldpos);
        return DWG_ERR_INVALIDDWG;
    }
    else if (obj_end < dat->byte)
    {
        LOG_ERROR("Invalid object size at offset 0x%zx", oldpos);
        return DWG_ERR_INVALIDDWG;
    }
    else if (obj_end > dat->byte)
    {
        size_t unknown_size = obj_end - dat->byte;
        obj->unknown_data = malloc(unknown_size);
        if (!obj->unknown_data)
        {
            LOG_ERROR("Out of memory");
            return DWG_ERR_OUTOFMEM;
        }
        memcpy(obj->unknown_data, dat->chain + dat->byte, unknown_size);
        dat->byte += unknown_size;
        LOG_WARN("Found %zu bytes of unknown data at offset 0x%zx", unknown_size, oldpos + obj->size);
    }
}