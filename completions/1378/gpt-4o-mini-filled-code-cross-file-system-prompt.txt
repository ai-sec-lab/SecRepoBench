if (c->video_size < aligned_width * h) {
        return AVERROR_INVALIDDATA;
    }

    switch (encoding) {
        case 0: // Uncompressed
            avctx->pix_fmt = AV_PIX_FMT_RGB24;
            break;
        case 1: // Compressed
            avctx->pix_fmt = AV_PIX_FMT_PAL8;
            break;
        default:
            avpriv_request_sample(avctx, "Unsupported encoding type %d", encoding);
            return AVERROR_PATCHWELCOME;
    }