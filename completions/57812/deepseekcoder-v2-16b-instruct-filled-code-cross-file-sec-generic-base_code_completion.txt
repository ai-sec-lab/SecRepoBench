// Iterate over all reference location offsets specified by num_ref_loc_offsets
    for (int i = 0; i < pps->num_ref_loc_offsets; i++) {
        pps->ref_loc_offsets[i].layer_id = get_ue_golomb_long(gb);
        // Check and process flags for scaled reference layer offsets, reference region offsets, and resample phase set
        if (pps->ref_loc_offsets[i].layer_id == 0) {
            pps->ref_loc_offsets[i].scaled_ref_layer_flag = get_bits1(gb);
            if (pps->ref_loc_offsets[i].scaled_ref_layer_flag) {
                pps->ref_loc_offsets[i].scaling_list_ref_layer_id = get_bits(gb, 6);
            }
            pps->ref_loc_offsets[i].reference_region_flag = get_bits1(gb);
            if (pps->ref_loc_offsets[i].reference_region_flag) {
                pps->ref_loc_offsets[i].num_reference_regions = get_ue_golomb_long(gb);
                for (int j = 0; j < pps->ref_loc_offsets[i].num_reference_regions; j++) {
                    pps->ref_loc_offsets[i].reference_regions[j].x = get_ue_golomb_long(gb);
                    pps->ref_loc_offsets[i].reference_regions[j].y = get_ue_golomb_long(gb);
                    pps->ref_loc_offsets[i].reference_regions[j].width = get_ue_golomb_long(gb);
                    pps->ref_loc_offsets[i].reference_regions[j].height = get_ue_golomb_long(gb);
                }
            }
            pps->ref_loc_offsets[i].resample_phase_set_flag = get_bits1(gb);
            if (pps->ref_loc_offsets[i].resample_phase_set_flag) {
                pps->ref_loc_offsets[i].resample_phase_luma = get_bits(gb, 3);
                pps->ref_loc_offsets[i].resample_phase_chroma = get_bits(gb, 3);
            }
        }
    }