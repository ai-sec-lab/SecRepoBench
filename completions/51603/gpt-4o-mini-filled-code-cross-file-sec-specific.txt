m->factor_op = FILE_FACTOR_OP_NONE;
	m->factor = 0;

	if (*line == '+' || *line == '-') {
		m->factor_op = *line == '+' ? FILE_FACTOR_OP_PLUS : FILE_FACTOR_OP_MINUS;
		line++;
	}

	errno = 0;
	m->factor = strtol(line, &t, 10);
	if (errno != 0 || line == t) {
		file_magwarn(ms, "invalid factor value `%s'", line);
		m->factor_op = FILE_FACTOR_OP_NONE;
		m->factor = 0;
		return -1;
	}

	if (m->factor_op == FILE_FACTOR_OP_DIV && m->factor == 0) {
		file_magwarn(ms, "division by zero in strength annotation");
		m->factor_op = FILE_FACTOR_OP_NONE;
		m->factor = 0;
		return -1;
	}

	return 0;