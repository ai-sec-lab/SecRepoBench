if (me->mp == NULL) {
		file_magerror(ms, "No current entry for strength");
		return -1;
	}

	if (me->mp->type == FILE_NAME) {
		file_magwarn(ms, "Strength setting not supported for NAME type");
		return -1;
	}

	if (me->mp->factor_op != FILE_FACTOR_OP_NONE) {
		file_magwarn(ms, "Strength type already set");
		return -1;
	}

	switch (*line) {
	case FILE_FACTOR_OP_PLUS:
	case FILE_FACTOR_OP_MINUS:
	case FILE_FACTOR_OP_TIMES:
	case FILE_FACTOR_OP_DIV:
		me->mp->factor_op = *line++;
		break;
	default:
		file_magwarn(ms, "Invalid strength type `%c'", *line);
		return -1;
	}

	me->mp->factor = (uint16_t)strtoul(line, &t, 0);
	if (me->mp->factor == 0 && me->mp->factor_op == FILE_FACTOR_OP_DIV) {
		file_magwarn(ms, "Cannot have factor op division by 0");
		me->mp->factor_op = FILE_FACTOR_OP_NONE;
		me->mp->factor = 0;
		return -1;
	}

	if (me->mp->factor > 1000) {
		file_magwarn(ms, "Too large factor `%hu'", me->mp->factor);
		me->mp->factor_op = FILE_FACTOR_OP_NONE;
		me->mp->factor = 0;
		return -1;
	}

	return 0;