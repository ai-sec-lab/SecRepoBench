struct magic *m = me->mp;
if (m == NULL) {
    file_error(ms, 0, "No current entry for strength");
    return -1;
}
if (m->factor_op != FILE_FACTOR_OP_NONE) {
    file_magwarn(ms,
        "Current entry already has a strength type: %c %d",
        m->factor_op, m->factor);
    return -1;
}
if (m->type == FILE_NAME) {
    file_magwarn(ms, "Strength setting is not supported in "
        "\"name\" magic entries");
    return -1;
}