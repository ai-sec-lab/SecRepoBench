char op;
	uint32_t factor;

	if (me->mp[0].factor_op != FILE_FACTOR_OP_NONE) {
		file_magwarn(ms,
		    "Current entry already has a strength type `%c %u', "
		    "new type `%s'", me->mp[0].factor_op, me->mp[0].factor,
		    line);
		return -1;
	}
	if (me->mp[0].type == FILE_NAME) {
		file_magwarn(ms, "Strength setting is not supported for "
		    "name magic entries");
		return -1;
	}

	EATAB;
	switch (*line) {
	case FILE_FACTOR_OP_PLUS:
	case FILE_FACTOR_OP_MINUS:
	case FILE_FACTOR_OP_TIMES:
	case FILE_FACTOR_OP_DIV:
		op = *line++;
		break;
	default:
		file_magwarn(ms, "Unknown factor op `%c'", *line);
		return -1;
	}
	EATAB;

	factor = CAST(uint32_t, strtoul(line, &line, 0));
	if (factor > 255) {
		file_magwarn(ms, "Too large factor `%u'", factor);
		factor = 0;
		return -1;
	}
	if (factor == 0 && op == FILE_FACTOR_OP_DIV) {
		file_magwarn(ms, "Cannot have factor of 0 with `/` op.");
		factor = 1;
		return -1;
	}
	me->mp[0].factor_op = op;
	me->mp[0].factor = CAST(uint8_t, factor);
	return 0;