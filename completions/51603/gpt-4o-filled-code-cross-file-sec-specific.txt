if (me->mp == NULL) {
		file_magerror(ms, "No current entry for strength");
		return -1;
	}

	if (me->mp->type == FILE_NAME) {
		file_magwarn(ms, "Strength setting not supported for "
		    "`name' entries");
		return -1;
	}

	EATAB;
	switch (*line) {
	case FILE_FACTOR_OP_PLUS:
		me->mp->factor_op = FILE_FACTOR_OP_PLUS;
		break;
	case FILE_FACTOR_OP_MINUS:
		me->mp->factor_op = FILE_FACTOR_OP_MINUS;
		break;
	case FILE_FACTOR_OP_TIMES:
		me->mp->factor_op = FILE_FACTOR_OP_TIMES;
		break;
	case FILE_FACTOR_OP_DIV:
		me->mp->factor_op = FILE_FACTOR_OP_DIV;
		break;
	default:
		file_magwarn(ms, "Unknown factor op `%c'", *line);
		return -1;
	}

	line++;
	me->mp->factor = (uint16_t)strtoul(line, &t, 0);
	if (me->mp->factor == 0 || me->mp->factor > 1000) {
		file_magwarn(ms, "Invalid factor `%hu'", me->mp->factor);
		me->mp->factor_op = FILE_FACTOR_OP_NONE;
		me->mp->factor = 0;
		return -1;
	}

	if (me->mp->factor_op == FILE_FACTOR_OP_DIV && me->mp->factor == 0) {
		file_magwarn(ms, "Cannot divide by zero");
		me->mp->factor_op = FILE_FACTOR_OP_NONE;
		me->mp->factor = 0;
		return -1;
	}

	return 0;