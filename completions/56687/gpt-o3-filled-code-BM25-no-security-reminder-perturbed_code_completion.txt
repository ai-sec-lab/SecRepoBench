/* instance methods ------------------------------------------------------ */
  mrb_define_method(mrbstateptr, io, "initialize_copy", io_init_copy,  MRB_ARGS_REQ(1));
  mrb_define_method(mrbstateptr, io, "inspect",         io_inspect,    MRB_ARGS_NONE());

  /* stream positioning ---------------------------------------------------- */
  mrb_define_method(mrbstateptr, io, "seek",            io_seek,       MRB_ARGS_ARG(1,1));
  mrb_define_method(mrbstateptr, io, "tell",            io_tell,       MRB_ARGS_NONE());
  mrb_define_method(mrbstateptr, io, "pos",             io_tell,       MRB_ARGS_NONE());
  mrb_define_method(mrbstateptr, io, "rewind",          io_rewind,     MRB_ARGS_NONE());

  /* state/query ----------------------------------------------------------- */
  mrb_define_method(mrbstateptr, io, "close",           io_close,      MRB_ARGS_NONE());
  mrb_define_method(mrbstateptr, io, "closed?",         io_closed,     MRB_ARGS_NONE());
  mrb_define_method(mrbstateptr, io, "eof?",            io_eof,        MRB_ARGS_NONE());
  mrb_define_method(mrbstateptr, io, "isatty",          io_isatty,     MRB_ARGS_NONE());

  /* buffering & synchronization ------------------------------------------ */
  mrb_define_method(mrbstateptr, io, "flush",           io_flush,      MRB_ARGS_NONE());
  mrb_define_method(mrbstateptr, io, "sync",            io_sync,       MRB_ARGS_NONE());
  mrb_define_method(mrbstateptr, io, "sync=",           io_set_sync,   MRB_ARGS_REQ(1));
  mrb_define_method(mrbstateptr, io, "binmode",         io_binmode,    MRB_ARGS_NONE());

  /* reading --------------------------------------------------------------- */
  mrb_define_method(mrbstateptr, io, "read",            io_read,       MRB_ARGS_ANY());
  mrb_define_method(mrbstateptr, io, "sysread",         io_sysread,    MRB_ARGS_REQ(1));
  mrb_define_method(mrbstateptr, io, "readpartial",     io_readpartial,MRB_ARGS_REQ(1)|MRB_ARGS_OPT(1));
  mrb_define_method(mrbstateptr, io, "gets",            io_gets,       MRB_ARGS_ANY());
  mrb_define_method(mrbstateptr, io, "getc",            io_getc,       MRB_ARGS_NONE());
  mrb_define_method(mrbstateptr, io, "readline",        io_readline,   MRB_ARGS_ANY());
  mrb_define_method(mrbstateptr, io, "readlines",       io_readlines,  MRB_ARGS_ANY());
  mrb_define_method(mrbstateptr, io, "each_line",       io_each_line,  MRB_ARGS_ANY());
  mrb_define_method(mrbstateptr, io, "each_byte",       io_each_byte,  MRB_ARGS_NONE());

  /* aliases --------------------------------------------------------------- */
  mrb_define_alias(mrbstateptr,  io, "eof",     "eof?");
  mrb_define_alias(mrbstateptr,  io, "sysseek", "seek");
  mrb_define_alias(mrbstateptr,  io, "to_i",    "fileno");
  mrb_define_alias(mrbstateptr,  io, "to_io",   "to_i");