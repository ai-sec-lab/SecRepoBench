const char
  *value;

uint32
  i;

for (i=0; i < TIFFGetTagListCount(tiff); i++)
{
  uint32 tag=TIFFGetTagListEntry(tiff,i);
  if (TIFFGetField(tiff,tag,&count,&text) != 1)
    continue;
  switch (TIFFFieldDataType(TIFFFieldWithTag(tiff,tag)))
  {
    case TIFF_ASCII:
      value=(const char *) text;
      if (value != (const char *) NULL)
        (void) SetImageProperty(image,TIFFTagToString(tag),value,exception);
      break;
    case TIFF_DOUBLE:
    case TIFF_FLOAT:
    case TIFF_LONG:
    case TIFF_SHORT:
      (void) FormatLocaleString(message,MagickPathExtent,"%g",(double) 
        *(float *) text);
      (void) SetImageProperty(image,TIFFTagToString(tag),message,exception);
      break;
    default:
      break;
  }
}