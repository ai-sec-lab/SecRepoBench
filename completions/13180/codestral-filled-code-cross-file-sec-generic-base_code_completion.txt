// Retrieve and set image properties from TIFF tags.
uint16 subfiletype;
char *value;

if (TIFFGetField(tiff, TIFFTAG_ARTIST, &value) == 1)
  (void) SetImageProperty(image, "artist", value, exception);

if (TIFFGetField(tiff, TIFFTAG_COPYRIGHT, &value) == 1)
  (void) SetImageProperty(image, "copyright", value, exception);

if (TIFFGetField(tiff, TIFFTAG_DOCUMENTNAME, &value) == 1)
  (void) SetImageProperty(image, "document", value, exception);

if (TIFFGetField(tiff, TIFFTAG_IMAGEDESCRIPTION, &value) == 1)
  (void) SetImageProperty(image, "comment", value, exception);

if (TIFFGetField(tiff, TIFFTAG_MAKE, &value) == 1)
  (void) SetImageProperty(image, "tiff:make", value, exception);

if (TIFFGetField(tiff, TIFFTAG_MODEL, &value) == 1)
  (void) SetImageProperty(image, "tiff:model", value, exception);

if (TIFFGetField(tiff, TIFFTAG_SOFTWARE, &value) == 1)
  (void) SetImageProperty(image, "tiff:software", value, exception);

if (TIFFGetField(tiff, TIFFTAG_DATETIME, &value) == 1)
  (void) SetImageProperty(image, "tiff:timestamp", value, exception);

if (TIFFGetField(tiff, TIFFTAG_HOSTCOMPUTER, &value) == 1)
  (void) SetImageProperty(image, "tiff:hostcomputer", value, exception);

if (TIFFGetField(tiff, TIFFTAG_PAGENAME, &value) == 1)
  (void) SetImageProperty(image, "label", value, exception);

if (TIFFGetField(tiff, TIFFTAG_SUBFILETYPE, &subfiletype) == 1)
{
  switch (subfiletype)
  {
    case FILETYPE_REDUCEDIMAGE:
      (void) SetImageProperty(image, "tiff:subfiletype", "REDUCEDIMAGE", exception);
      break;
    case FILETYPE_PAGE:
      (void) SetImageProperty(image, "tiff:subfiletype", "PAGE", exception);
      break;
    case FILETYPE_MASK:
      (void) SetImageProperty(image, "tiff:subfiletype", "MASK", exception);
      break;
    default:
      break;
  }
}

// Handle OPIIMAGEID field
uint32 count;
char *opi_image_id;

if (TIFFGetField(tiff, 33423, &count, &opi_image_id) == 1)
{
  if (count > 0)
  {
    char *image_id = (char *)malloc(count + 1);
    if (image_id != NULL)
    {
      strncpy(image_id, opi_image_id, count);
      image_id[count] = '\0';
      (void) SetImageProperty(image, "tiff:OPIIMAGEID", image_id, exception);
      free(image_id);
    }
  }
}

// Handle 36867 field
char *kodak_36867;

if (TIFFGetField(tiff, 36867, &kodak_36867) == 1)
  (void) SetImageProperty(image, "kodak-36867", kodak_36867, exception);