// Initialize the TIFF directory
  uint32 directory = 0; // Assuming we start with the first directory
  TIFFSetDirectory(tiff, directory);

  // Retrieve and set various TIFF tags as image properties
  const char *artist = GetImageArtifact(image, "tiff:artist");
  if (artist != NULL) {
    (void) TIFFSetField(tiff, TIFFTAG_ARTIST, artist);
  }

  const char *copyright = GetImageArtifact(image, "tiff:copyright");
  if (copyright != NULL) {
    (void) TIFFSetField(tiff, TIFFTAG_COPYRIGHT, copyright);
  }

  const char *documentName = GetImageArtifact(image, "tiff:document");
  if (documentName != NULL) {
    (void) TIFFSetField(tiff, TIFFTAG_DOCUMENTNAME, documentName);
  }

  const char *subfileType = GetImageArtifact(image, "tiff:subfiletype");
  if (subfileType != NULL) {
    if (LocaleCompare(subfileType, "REDUCEDIMAGE") == 0) {
      (void) TIFFSetField(tiff, TIFFTAG_SUBFILETYPE, FILETYPE_REDUCEDIMAGE);
    } else if (LocaleCompare(subfileType, "PAGE") == 0) {
      (void) TIFFSetField(tiff, TIFFTAG_SUBFILETYPE, FILETYPE_PAGE);
    } else if (LocaleCompare(subfileType, "MASK") == 0) {
      (void) TIFFSetField(tiff, TIFFTAG_SUBFILETYPE, FILETYPE_MASK);
    }
  } else {
    // Default handling for subfile type
    uint16 page = (uint16) image->scene;
    uint16 pages = (uint16) GetImageListLength(image);
    if (pages > 1) {
      (void) TIFFSetField(tiff, TIFFTAG_SUBFILETYPE, FILETYPE_PAGE);
    }
    (void) TIFFSetField(tiff, TIFFTAG_PAGENUMBER, page, pages);
  }

  // Handle additional properties
  const char *timestamp = GetImageArtifact(image, "tiff:timestamp");
  if (timestamp != NULL) {
    (void) TIFFSetField(tiff, TIFFTAG_DATETIME, timestamp);
  }

  const char *software = GetImageArtifact(image, "tiff:software");
  if (software != NULL) {
    (void) TIFFSetField(tiff, TIFFTAG_SOFTWARE, software);
  }

  // Handle any other relevant TIFF tags as needed
  // ...