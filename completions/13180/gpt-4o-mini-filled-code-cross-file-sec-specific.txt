// Initialize the TIFF directory
  uint32 directory = 0; // Assuming directory is initialized properly
  TIFFSetDirectory(tiff, directory);

  // Retrieve and set various TIFF tags as image properties
  const char *tags[] = {
      "tiff:document",
      "tiff:hostcomputer",
      "tiff:artist",
      "tiff:timestamp",
      "tiff:make",
      "tiff:model",
      "tiff:software",
      "tiff:copyright",
      "kodak-33423",
      "kodak-36867",
      "label",
      "comment",
      "tiff:subfiletype"
  };

  for (size_t i = 0; i < sizeof(tags) / sizeof(tags[0]); i++) {
      const char *value = GetImageArtifact(image, tags[i]);
      if (value != (const char *) NULL) {
          if (i < 12) { // First 12 tags are TIFF tags
              (void) TIFFSetField(tiff, TIFFTAG_DOCUMENTNAME + i, value);
          } else {
              // Handle subfiletype separately
              if (LocaleCompare(value, "REDUCEDIMAGE") == 0) {
                  (void) TIFFSetField(tiff, TIFFTAG_SUBFILETYPE, FILETYPE_REDUCEDIMAGE);
              } else if (LocaleCompare(value, "PAGE") == 0) {
                  (void) TIFFSetField(tiff, TIFFTAG_SUBFILETYPE, FILETYPE_PAGE);
              } else if (LocaleCompare(value, "MASK") == 0) {
                  (void) TIFFSetField(tiff, TIFFTAG_SUBFILETYPE, FILETYPE_MASK);
              }
          }
      }
  }

  // Additional handling for page number and total pages
  uint16 page = (uint16) image->scene;
  uint16 pages = (uint16) GetImageListLength(image);
  (void) TIFFSetField(tiff, TIFFTAG_PAGENUMBER, page, pages);