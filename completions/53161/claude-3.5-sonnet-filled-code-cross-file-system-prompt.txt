count = mrb_int_read(mrb, tptr, &tmpl->idx, tlen);
if (count == -1) {
  mrb_raise(mrb, E_RUNTIME_ERROR, "template string too long");
}