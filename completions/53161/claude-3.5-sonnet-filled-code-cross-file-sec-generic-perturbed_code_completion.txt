mrb_int v;
if (mrb_read_int(mrb, tptr, &tmpl->idx, tlen, &v) == MRB_INT_OVERFLOW) {
  mrb_raise(mrb, E_RUNTIME_ERROR, "template length too large");
}
count = (int)v;