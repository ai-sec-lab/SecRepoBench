int i = 0;
      count = 0;
      do {
        if (mrb_int_read(mrb, &count, 10, ch - '0') == MRB_INT_FAILED) {
          mrb_raisef(mrb, E_RUNTIME_ERROR, "too big template length: %S", tmpl->str);
        }
        i++;
      } while (ISDIGIT(ch = tptr[++tmpl->idx]));
      tmpl->idx--; // Rewind because the loop increments once more than necessary