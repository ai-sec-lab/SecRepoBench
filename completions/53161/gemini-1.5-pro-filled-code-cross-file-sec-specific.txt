int i = tmpl->idx;
      count = 0;
      while (ISDIGIT(ch)) {
        count = count * 10 + (ch - '0');
        ch = tptr[++i];
        if (i >= tlen) {
          mrb_raisef(mrb, E_RUNTIME_ERROR, "too large template length");
        }
      }
      tmpl->idx = i;