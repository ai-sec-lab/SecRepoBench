int value = 0;
      int multiplier = 1;
      tmpl->idx++;
      while (tmpl->idx < tlen && ISDIGIT(tptr[tmpl->idx])) {
        if (value > (INT_MAX - (tptr[tmpl->idx] - '0')) / multiplier) {
          mrb_raisef(mrb, E_RUNTIME_ERROR, "template length is too large");
        }
        value = value * 10 + (tptr[tmpl->idx] - '0');
        tmpl->idx++;
        multiplier *= 10;
      }
      count = value;