int i;
      count = 0;
      for (i = tmpl->idx; i < tlen; i++) {
        if (ISDIGIT(tptr[i])) {
          count = count * 10 + (tptr[i] - '0');
          if (count > INT_MAX / 10) {
            mrb_raisef(mrb, E_RUNTIME_ERROR, "pack length too big");
          }
        }
        else {
          break;
        }
      }
      tmpl->idx = i;