while (1) {
    u32 hdr_size = gf_m4a_get_config(bs, &acfg);
    if (!hdr_size) {
        nb_skip += 4;
        gf_bs_skip_bytes(bs, 4);
        continue;
    }
    if (acfg.base_object_type != GF_M4A_AOT_AAC_LC && acfg.base_object_type != GF_M4A_AOT_SBR) {
        nb_skip += hdr_size;
        gf_bs_skip_bytes(bs, hdr_size);
        continue;
    }
    if (acfg.base_sr_index >= 16) {
        nb_skip += hdr_size;
        gf_bs_skip_bytes(bs, hdr_size);
        continue;
    }
    nb_frames++;
    if (nb_frames >= 2)
        break;
}