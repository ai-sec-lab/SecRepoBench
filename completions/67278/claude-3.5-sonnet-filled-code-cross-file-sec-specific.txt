u32 sync_word = gf_bs_read_int(bs, 11);
if (sync_word != 0x2B7) {
    nb_skip += 1;
    gf_bs_read_int(bs, 1);
    continue;
}

u32 frame_length = gf_bs_read_int(bs, 13);
if (frame_length > size - gf_bs_get_position(bs)/8) {
    nb_skip += 1;
    gf_bs_read_int(bs, 1);
    continue;
}

gf_bs_read_int(bs, 1); // ID
u32 layer = gf_bs_read_int(bs, 2);
gf_bs_read_int(bs, 1); // protection_absent

u32 profile = gf_bs_read_int(bs, 2);
u32 sr_idx = gf_bs_read_int(bs, 4);
if (sr_idx >= 13) {
    nb_skip += 1;
    gf_bs_read_int(bs, 1);
    continue;
}

gf_bs_read_int(bs, 1); // private_bit
u32 ch_cfg = gf_bs_read_int(bs, 3);
gf_bs_read_int(bs, 2); // original/copy and home

nb_frames++;
if (nb_frames >= 2) break;

gf_bs_align(bs);