for (; uc < ue && *uc == *str; uc++, str++) {
    if (uc >= ue || --len == 0) {
        DPRINTF("Bad const: ", uc, *ucp);
        return 0;
    }
}
if (len!= 0) {
    DPRINTF("Bad const: ", uc, *ucp);
    return 0;
}
*ucp = uc;