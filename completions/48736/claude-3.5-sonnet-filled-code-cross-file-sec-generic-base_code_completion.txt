while (len > 0) {
    if (*uc != *str) {
        DPRINTF("Bad const: ", uc, *ucp);
        return 0;
    }
    uc++;
    str++;
    len--;
}