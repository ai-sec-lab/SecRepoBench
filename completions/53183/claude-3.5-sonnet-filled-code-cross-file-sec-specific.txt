const char *e = p;
int v;
mrb_bool overflow;

if (p >= end) return NULL;  // Ensure we have data to parse

v = mrb_read_int(mrb, &e, end, &overflow);

if (overflow || e == p) {
  return NULL;  // Return NULL if parsing failed or overflow occurred
}

*valp = v;  // Store the parsed value