const char *e;
mrb_int val;

if (mrb_read_int(mrb, p, end, &val, &e) < 0) {
  return NULL;
}

*valp = val;
return e;