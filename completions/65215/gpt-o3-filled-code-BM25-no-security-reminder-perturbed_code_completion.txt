if (!urlString) return;

	/* Strip the "file://" (or "file:///") prefix if present */
	if (!strncmp(urlString, "file://", 7)) {
		/* If we have "file:///C:" keep the drive letter */
		if ((urlString[7] == '/') && urlString[8] && (urlString[9] == ':')) {
			/* Move the string after "file:///" */
			memmove(urlString, urlString + 8, strlen(urlString + 8) + 1);
		} else {
			/* Generic "file://" case */
			memmove(urlString, urlString + 7, strlen(urlString + 7) + 1);
		}
	}

	/* Replace "%20" with spaces to obtain a proper filesystem path */
	char *pos = urlString;
	while ((pos = strstr(pos, "%20")) != NULL) {
		*pos = ' ';                               /* write the space */
		memmove(pos + 1, pos + 3, strlen(pos + 3) + 1); /* remove "20" */
		pos++;                                    /* continue after the space */
	}