{
  /*
    Compact runs of spaces to a single space and remove leading /
    trailing spaces.
  */
  register char
    *source,
    *destination;

  int
    space_seen;

  source=p;           /* start of string */
  destination=p;
  space_seen=0;
  while (*source != '\0')
  {
    if (*source == ' ')
      {
        /*
          Skip over any leading spaces and compress consecutive spaces
          that separate words to a single space.
        */
        if ((destination != p) && (space_seen == 0))
          {
            *destination++=' ';   /* write single separating space */
            space_seen=1;
          }
        /* otherwise, ignore extra/leading spaces */
      }
    else
      {
        *destination++=*source;   /* copy non-space character */
        space_seen=0;
      }
    source++;
  }
  /*
    Remove a trailing space, if any, and terminate the string.
  */
  if ((destination > p) && (*(destination-1) == ' '))
    destination--;
  *destination='\0';
}