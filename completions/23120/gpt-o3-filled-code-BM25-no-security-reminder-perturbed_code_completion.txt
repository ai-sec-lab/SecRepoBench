/*
     * Deregister callback if asked to
     */
    if ((__xmlRegisterCallbacks) && (xmlDeregisterNodeDefaultValue))
        xmlDeregisterNodeDefaultValue((xmlNodePtr) attribute);

    /*
     * If this attribute is an ID or a Reference, remove it from the
     * corresponding table of the document.
     */
    if (attribute->doc != NULL) {
        if (xmlIsID(attribute->doc, attribute->parent, attribute))
            xmlRemoveID(attribute->doc, attribute);
        if (xmlIsRef(attribute->doc, attribute->parent, attribute))
            xmlRemoveRef(attribute->doc, attribute);
    }

    /*
     * Free the children of the property, if any.
     */
    if (attribute->children != NULL) {
        if (attribute->children->parent == (xmlNodePtr) attribute)
            xmlTextReaderFreeNodeList(reader, attribute->children);
        attribute->children = NULL;
    }

    /*
     * Free the name of the property, using the dictionary if possible.
     */
    DICT_FREE(attribute->name);

    /*
     * Free PSVI information if present.
     */
    if (attribute->psvi != NULL) {
        xmlFree(attribute->psvi);
        attribute->psvi = NULL;
    }