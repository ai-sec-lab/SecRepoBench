n=0;
            for (p=q; *p != '\0'; )
            {
              GetNextToken(p,&p,extent,token);
              if (LocaleCompare("pop",token) == 0)
                {
                  GetNextToken(p,&p,extent,token);
                  if (LocaleCompare("graphic-context",token) == 0)
                    n--;
                  if (n < 0)
                    break;
                }
              if (LocaleCompare("push",token) == 0)
                {
                  GetNextToken(p,&p,extent,token);
                  if (LocaleCompare("graphic-context",token) == 0)
                    n++;
                }
            }
            end=p-1;
            if (n >= 0)
              continue;
            (void) CopyMagickString(name,token,MagickPathExtent);
            (void) AddValueToSplayTree(macros,ConstantString(name),
              ConstantString(start));
            q=end+1;