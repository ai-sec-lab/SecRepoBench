n=0;
            end=strchr(start,'"');
            if (end == (const char *) NULL)
              break;
            name[0]='\0';
            (void) CopyMagickString(name,start,(size_t) (end-start));
            AddValueToSplayTree(macros,ConstantString(name),
              ConstantString(start));
            q=end+1;
            n++;
            continue;
          }
        GetNextToken(q,&q,extent,token);
        if (LocaleCompare("graphic-context",token) == 0)
          {
            register const char
              *end,
              *start;

            GetNextToken(q,&q,extent,token);
            start=q;
            end=strchr(start,'"');
            if (end == (const char *) NULL)
              break;
            name[0]='\0';
            (void) CopyMagickString(name,start,(size_t) (end-start));
            AddValueToSplayTree(macros,ConstantString(name),
              ConstantString(start));
            q=end+1;
            n++;
            continue;
          }
        if (LocaleCompare("pop",token) == 0)
          {
            GetNextToken(q,&q,extent,token);
            if (LocaleCompare("graphic-context",token) == 0)
              {
                n--;
                if (n < 0)
                  break;
              }
          }
      }