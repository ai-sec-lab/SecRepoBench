end=q;
for (p=q; (*p != '\0') && (*p != '"'); p++) ;
if (*p == '\0')
  break;
(void) CopyMagickString(name,start,(size_t) (p-start+1));
GetNextToken(q,&q,length,token);
(void) AddValueToSplayTree(macros,ConstantString(name),
  ConstantString(token));