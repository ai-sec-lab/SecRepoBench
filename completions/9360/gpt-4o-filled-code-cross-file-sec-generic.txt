p=q;
            n=0;
            while ((*q != '\0') && ((n > 0) || (LocaleCompare("pop",token) != 0)))
            {
              GetNextToken(q,&q,extent,token);
              if (*token == '\0')
                break;
              if (LocaleCompare("push",token) == 0)
                n++;
              else if (LocaleCompare("pop",token) == 0)
                n--;
            }
            end=q-1;
            if (n < 0)
            {
              (void) CopyMagickString(name,token,MagickPathExtent);
              (void) AddValueToSplayTree(macros,ConstantString(name),
                ConstantString(start));
            }