mrb_get_args(mrb, "|i", &n);
if (n < 0) {
  mrb_raise(mrb, E_ARGUMENT_ERROR, "negative array size");
}
if (n == 0) {
  n = 1;
}
if (n > len) {
  n = len;
}
if (ARY_SHARED_P(a)) {
  ary_make_shared(mrb, a);
}
if (n == 1) {
  val = ARY_PTR(a)[0];
  L_SHIFT:
  ARY_PTR(a)++;
}
else {
  val = ary_subseq(mrb, a, 0, n);
}