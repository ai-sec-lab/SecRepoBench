mrb_get_args(mrb, "|i", &n);
  if (n < 0) {
    mrb_raise(mrb, E_ARGUMENT_ERROR, "negative array size");
  }
  if (n == 0) n = 1;
  if (len == 0) return mrb_nil_value();
  if (n > len) n = len;

  val = mrb_ary_new_from_values(mrb, n, ARY_PTR(a));

L_SHIFT: