n = mrb_get_argc(mrb);
  if (n == 0) {
    n = 1;
  }
  else if (n != 1) {
    mrb_raisef(mrb, E_ARGUMENT_ERROR, "wrong number of arguments (given %i, expected 0..1)", n);
  }
  mrb_get_args(mrb, "|i", &n);

  if (n < 0) {
    mrb_raisef(mrb, E_ARGUMENT_ERROR, "negative array size (%i)", n);
  }

  if (len == 0) {
    return mrb_nil_value();
  }
  if (n > len) {
    n = len;
  }

  ary_modify(mrb, a);
L_SHIFT:
  val = ary_subseq(mrb, a, 0, n);