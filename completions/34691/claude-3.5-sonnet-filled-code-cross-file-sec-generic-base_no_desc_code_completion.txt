if (mrb_get_args(mrb, "|i", &n) == 0) {
  n = 1;
}
if (n < 0 || ARY_LEN(a) < n) {
  mrb_raise(mrb, E_ARGUMENT_ERROR, "array size too small for shift");
}
if (ARY_SHARED_P(a)) {
  if (n > ARY_LEN(a)) {
    return mrb_ary_new(mrb);
  }
  val = ary_subseq(mrb, a, 0, n);
L_SHIFT:
  a->as.heap.ptr += n;
  ARY_SET_LEN(a, ARY_LEN(a) - n);
  return val;
}
if (n == 0) return mrb_ary_new(mrb);
val = mrb_ary_new_from_values(mrb, n, ARY_PTR(a));