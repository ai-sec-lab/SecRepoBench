if (n > len) n = len;
if (n <= 0) return mrb_ary_new(mrb);

val = mrb_ary_new_from_values(mrb, n, ARY_PTR(a));

if (ARY_SHARED_P(a)) {
L_SHIFT:
  a->as.heap.ptr += n;
  a->as.heap.len -= n;
  return val;
}