if (in.empty()) {
            return;
        }

        // Remove leading spaces or new lines
        size_t start = in.find_first_not_of(" \n\r");
        if (start != std::string::npos) {
            in.erase(0, start);
        }

        const char separator = getOsSeparator();
        char last = 0;
        for (auto it = in.begin(); it != in.end(); ++it) {
            int remaining = std::distance(in.end(), it);
            // Skip over "://" and "\\\\" sequences
            if (remaining >= 3 && strncmp(&*it, "://", 3) == 0) {
                it += 3;
                continue;
            }
            if (it == in.begin() && remaining >= 2 && strncmp(&*it, "\\\\", 2) == 0) {
                it += 2;
                continue;
            }

            // Replace slashes with the OS separator
            if (*it == '/' || *it == '\\') {
                *it = separator;
                if (last == *it) {
                    it = in.erase(it);
                    --it;
                }
            } else if (*it == '%' && remaining > 2) {
                // Handle hexadecimal sequences
                if (IsHex(*(it + 1)) && IsHex(*(it + 2))) {
                    *it = HexOctetToDecimal(&*it);
                    it = in.erase(it + 1, it + 3);
                    --it;
                }
            }
            last = *it;
        }