if (in.empty()) {
        return;
    }

    // Remove leading spaces or new lines
    in.erase(in.begin(), std::find_if(in.begin(), in.end(), [](unsigned char ch) {
        return !std::isspace(ch);
    }));

    const char separator = getOsSeparator();
    char last = 0;
    for (auto it = in.begin(); it != in.end(); ++it) {
        int remaining = std::distance(it, in.end());

        // Skip "://" and "\\\\" sequences
        if (remaining >= 3 && std::strncmp(&*it, "://", 3) == 0) {
            it += 2;
            continue;
        }
        if (it == in.begin() && remaining >= 2 && std::strncmp(&*it, "\\\\", 2) == 0) {
            it += 1;
            continue;
        }

        // Replace slashes with the OS separator
        if (*it == '/' || *it == '\\') {
            *it = separator;

            // Remove double delimiters
            if (last == *it) {
                it = in.erase(it);
                --it;
            }
        } else if (*it == '%' && remaining > 2 && IsHex((*(it + 1))) && IsHex((*(it + 2)))) {
            // Convert hexadecimal sequences
            *it = static_cast<char>((std::stoi(std::string(it + 1, it + 3), nullptr, 16)) & 0xFF);
            it = in.erase(it + 1, it + 3);
            --it;
        }

        last = *it;
    }