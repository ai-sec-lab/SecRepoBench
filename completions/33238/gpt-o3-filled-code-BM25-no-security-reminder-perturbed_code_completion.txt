// Return early for an empty string
        if (input_string.empty()) {
            return;
        }

        // ------------------------------------------------------------------
        // 1. Strip leading white-space characters
        // ------------------------------------------------------------------
        while (!input_string.empty() &&
               (input_string.front() == ' '  || input_string.front() == '\t' ||
                input_string.front() == '\n' || input_string.front() == '\r')) {
            input_string.erase(input_string.begin());
        }

        // ------------------------------------------------------------------
        // 2. Normalise path delimiters and perform additional clean-up
        // ------------------------------------------------------------------
#ifdef _WIN32
        const char system_delim = '\\';
#else
        const char system_delim = '/';
#endif

        std::string cleaned;
        cleaned.reserve(input_string.size());

        auto hex_to_int = [](char c) -> int {
            if (c >= '0' && c <= '9') return c - '0';
            if (c >= 'a' && c <= 'f') return 10 + (c - 'a');
            if (c >= 'A' && c <= 'F') return 10 + (c - 'A');
            return -1;
        };

        for (std::size_t i = 0; i < input_string.size(); ++i) {
            char ch = input_string[i];

            // --------------------------------------------------------------
            // 2.a  URI hex (%xx) decoding
            // --------------------------------------------------------------
            if (ch == '%' && i + 2 < input_string.size()) {
                int hi = hex_to_int(input_string[i + 1]);
                int lo = hex_to_int(input_string[i + 2]);
                if (hi != -1 && lo != -1) {
                    cleaned.push_back(static_cast<char>((hi << 4) | lo));
                    i += 2; // skip the two hex digits
                    continue;
                }
            }

            // --------------------------------------------------------------
            // 2.b  Unify directory separators
            // --------------------------------------------------------------
            if (ch == '/' || ch == '\\') {
                bool keep_duplicate = false;

                // Detect "://" (protocol)  -> keep the second slash
                if (!cleaned.empty() && cleaned.back() == system_delim) {
                    std::size_t len = cleaned.size();
                    if (len >= 2 && cleaned[len - 2] == ':') {
                        keep_duplicate = true;
                    }
                    // Detect leading UNC path (\\server\share) -> keep the second slash
                    if (len == 1) {
                        keep_duplicate = true;
                    }
                }

                if (!(!keep_duplicate && !cleaned.empty() && cleaned.back() == system_delim)) {
                    cleaned.push_back(system_delim);
                }
                continue;
            }

            // --------------------------------------------------------------
            // 2.c  Normal character
            // --------------------------------------------------------------
            cleaned.push_back(ch);
        }

        // Replace the original string with the cleaned version
        input_string.swap(cleaned);