mrb_value farg = GETARG();
        mrb_float fval = mrb_to_flo(mrb, farg);
        char fbuf[32];
        int need;

        /* if precision is not given, default is 6 (the same as printf) */
        if ((flags & FPREC) == 0) {
          prec = 6;
          flags |= FPREC;
        }
        else if (prec < 0) {
          prec = 0;
        }