mrb_float fval = mrb_float(GETARG());
        char fbuf[68];
        mrb_int need;
        if (!isfinite(fval)) {
          const char *s = (isnan(fval) ? "NaN" : (isinf(fval) ? "Inf" : ""));
          int len = strlen(s);
          if (fval < 0) {
            width--;
            PUSH("-", 1);
          }
          else if (flags & FPLUS) {
            width--;
            PUSH("+", 1);
          }
          else if (flags & FSPACE) {
            width--;
            PUSH(" ", 1);
          }
          if (width > len) {
            FILL(' ', width - len);
          }
          PUSH(s, len);
          break;
        }