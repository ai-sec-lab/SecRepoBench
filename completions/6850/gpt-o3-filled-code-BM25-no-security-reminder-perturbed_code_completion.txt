/*
            Retrieve pixel information from the image.
            Acquire a new FxInfo instance using the specified pattern
            starting after the prefix "hex:".
            Evaluate the red, green, and blue channel expressions,
            storing the results in respective pixel channels.
            Scale the evaluated channel values to the QuantumRange and
            assign them to the pixel structure.
          */
          {
            double
              value;

            FxInfo
              *fx_info;

            MagickStatusType
              status;

            PixelInfo
              pixel;

            /*
              Hex - color value as hexadecimal string.
            */
            if (image == (Image *) NULL)
              {
                (void) ThrowMagickException(exception,GetMagickModule(),
                  OptionWarning,"NoImageForProperty","\"%%[%s]\"",
                  lookup_pattern);
                continue; /* no image available */
              }

            GetPixelInfo(image,&pixel);
            fx_info=AcquireFxInfo(image,lookup_pattern+4,exception);
            status=FxEvaluateChannelExpression(fx_info,RedPixelChannel,0,0,
              &value,exception);
            pixel.red=(double) QuantumRange*value;
            status&=FxEvaluateChannelExpression(fx_info,GreenPixelChannel,0,0,
              &value,exception);
            pixel.green=(double) QuantumRange*value;
            status&=FxEvaluateChannelExpression(fx_info,BluePixelChannel,0,0,
              &value,exception);
            pixel.blue=(double) QuantumRange*value;
            if (image->colorspace == CMYKColorspace)
              {
                status&=FxEvaluateChannelExpression(fx_info,BlackPixelChannel,
                  0,0,&value,exception);
                pixel.black=(double) QuantumRange*value;
              }
            status&=FxEvaluateChannelExpression(fx_info,AlphaPixelChannel,0,0,
              &value,exception);
            pixel.alpha=(double) QuantumRange*value;
            fx_info=DestroyFxInfo(fx_info);
            if (status != MagickFalse)
              {
                char
                  name[MagickPathExtent];

                (void) QueryColorname(image,&pixel,X11Compliance,name,
                  exception);
                if (name[0] == '#')
                  AppendString2Text(name+1);  /* strip leading '#' */
                else
                  AppendString2Text(name);
              }
            continue;
          }