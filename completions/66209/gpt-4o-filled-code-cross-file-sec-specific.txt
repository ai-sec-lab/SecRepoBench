if (m < 1 || n < m) return -1;

  unsigned char first = xs[0];
  unsigned char last = xs[m - 1];
  long i = 0;

  while (i <= n - m) {
    // Find the first occurrence of the first character
    while (i <= n - m && ys[i] != first) {
      i++;
    }

    // If the first character is found, check the last character
    if (i <= n - m && ys[i] == first && ys[i + m - 1] == last) {
      // Check the rest of the substring
      long j;
      for (j = 1; j < m - 1; j++) {
        if (xs[j] != ys[i + j]) {
          break;
        }
      }
      if (j == m - 1) {
        return i; // Found the substring
      }
    }
    i++;
  }