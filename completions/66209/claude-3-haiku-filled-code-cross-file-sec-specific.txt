bitint *yp = (bitint *)ys;
  bitint *xe = (bitint *)(xs + m - sizeof(bitint));
  bitint x0 = *(bitint *)xs;
  bitint x1 = *(bitint *)(xs + m - sizeof(bitint));

  while (yp <= (bitint *)(ys + n - sizeof(bitint))) {
    bitint y = *yp++;
    if ((y - (MASK1 & x0)) & ~y & (MASK1 & x1)) {
      const unsigned char *p = (const unsigned char *)(yp - 1);
      if (memcmp(xs, p, m) == 0)
        return (mrb_int)(p - ys);
    }
  }