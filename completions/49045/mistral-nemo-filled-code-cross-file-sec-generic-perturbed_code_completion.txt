mrb_int num;
  mrb_get_args(mrb, "i", &num);
  mrb_value result = mrb_str_new(mrb, "", 0);
  mrb_int base = 10;
  mrb_get_args(mrb, "|i", &base);
  if (base < 2 || base > 36) {
    mrb_raise(mrb, E_ARGUMENT_ERROR, "base must be between 2 and 36");
  }
  while (num != 0) {
    mrb_int remainder = num % base;
    char c = (remainder < 10) ? '0' + remainder : 'a' - 10 + remainder;
    mrb_str_cat(mrb, result, &c, 1);
    num /= base;
  }
  return mrb_str_reverse(mrb, result);