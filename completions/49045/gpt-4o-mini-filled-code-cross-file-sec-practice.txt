mrb_int num;
  mrb_int base = 10; // Default base

  // Get the integer value from the object
  mrb_get_args(mrb, "i|i", &num, &base);

  // Validate base input
  if (base < 2 || base > 36) {
    mrb_raise(mrb, E_ARGUMENT_ERROR, "base must be between 2 and 36");
  }

  // Create a string buffer to hold the result
  char buffer[32]; // Sufficient for 32-bit integers
  char *ptr = &buffer[sizeof(buffer) - 1];
  *ptr = '\0'; // Null-terminate the string

  // Handle negative numbers for base 10
  mrb_bool is_negative = (num < 0 && base == 10);
  if (is_negative) {
    num = -num;
  }

  // Convert the integer to the specified base
  do {
    int digit = num % base;
    *(--ptr) = (digit < 10) ? (digit + '0') : (digit - 10 + 'a');
    num /= base;
  } while (num != 0);

  // If the number was negative, add the negative sign
  if (is_negative) {
    *(--ptr) = '-';
  }

  // Create a Ruby string from the buffer
  return mrb_str_new_cstr(mrb, ptr);