mrb_value
int_to_s(mrb_state *mrb, mrb_value self)
{
  mrb_int i;
  mrb_int base = 10;
  char buf[BUFSIZ];
  int len;

  mrb_get_args(mrb, "i|i", &i, &base);
  if (base < 2 || base > 36) {
    mrb_raisef(mrb, E_ARGUMENT_ERROR, "invalid radix %S", mrb_fixnum_value(base));
  }

  len = snprintf(buf, sizeof(buf), "%.*" PRId64, (int)sizeof(buf) - 1, (int64_t)i);
  return mrb_str_new(mrb, buf, len);
}