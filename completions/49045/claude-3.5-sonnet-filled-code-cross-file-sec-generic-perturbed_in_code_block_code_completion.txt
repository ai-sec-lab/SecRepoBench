mrb_int base = 10;
mrb_value str;
char *buf;
mrb_int len;
mrb_int val = mrb_integer(self);

mrb_get_args(state, "|i", &base);

if (base < 2 || base > 36) {
  mrb_raisef(state, E_ARGUMENT_ERROR, "invalid radix %i", base);
}

buf = mrb_malloc(state, 64);
len = mrb_int_to_str(buf, 64, val, base);

str = mrb_str_new(state, buf, len);
mrb_free(state, buf);

return str;