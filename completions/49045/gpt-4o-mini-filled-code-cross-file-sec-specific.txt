mrb_int num;
  mrb_int base = 10; // Default base

  mrb_get_args(mrb, "i|i", &num, &base); // Get integer and optional base

  if (base < 2 || base > 36) {
    mrb_raise(mrb, E_ARGUMENT_ERROR, "base must be between 2 and 36");
  }

  char buffer[32]; // Sufficient buffer for integer to string conversion
  char *ptr = buffer + sizeof(buffer) - 1; // Start from the end of the buffer
  *ptr = '\0'; // Null-terminate the string

  mrb_int n = num;
  do {
    mrb_int digit = n % base;
    *(--ptr) = (digit < 10) ? (digit + '0') : (digit - 10 + 'a'); // Convert digit to character
    n /= base;
  } while (n != 0);

  return mrb_str_new_cstr(mrb, ptr); // Create a new Ruby string from the buffer