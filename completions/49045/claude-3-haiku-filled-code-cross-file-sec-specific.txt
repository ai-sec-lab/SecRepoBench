char *buf = NULL;
int len = 0;

// Convert the integer value to a string
len = snprintf(NULL, 0, "%d", mrb_fixnum(self));
if (len < 0) {
  return mrb_nil_value();
}

buf = (char *)mrb_malloc(mrb, len + 1);
if (buf == NULL) {
  return mrb_nil_value();
}

len = snprintf(buf, len + 1, "%d", mrb_fixnum(self));
if (len < 0) {
  mrb_free(mrb, buf);
  return mrb_nil_value();
}

return mrb_str_new_cstr(mrb, buf);