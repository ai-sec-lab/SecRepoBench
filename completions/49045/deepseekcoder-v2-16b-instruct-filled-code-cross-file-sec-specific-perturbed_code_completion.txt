mrb_value num;
  mrb_int base = 10;
  mrb_get_args(state, "|i", &num, &base);

  char buffer[32]; // Ensure this buffer size is sufficient for the largest possible integer representation
  int len = snprintf(buffer, sizeof(buffer), "%" PRIdMRB, num);
  if (base != 10) {
    // Convert the number to the specified base
    char base_buffer[32];
    int base_len = snprintf(base_buffer, sizeof(base_buffer), "%" PRIdMRB, num);
    // Convert the base_buffer to the specified base
    // This is a simplified example and may need a proper implementation for different bases
    // For simplicity, we assume base is between 2 and 36
    // For bases outside this range, additional logic is needed
    // For bases higher than 36, we need to use characters to represent digits beyond 9
    // For bases lower than 2, this logic is not applicable
    // This example assumes a simple conversion for demonstration purposes
    // In a real-world scenario, you would need a proper conversion function
    // For example, using a library function or implementing a custom conversion
    // Here, we just return the string representation in base 10
    return mrb_str_new(state, base_buffer, base_len);
  }
  return mrb_str_new(state, buffer, len);