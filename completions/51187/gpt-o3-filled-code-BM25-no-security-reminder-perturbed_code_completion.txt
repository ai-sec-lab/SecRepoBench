/* preparation: maybe we have to create modified copies of the word
   * (and the optional morphological description) before inserting them
   * into the hash table
   */
  const std::string* word = &in_word;     // points to the (maybe modified) word
  std::string* word_copy = NULL;          // allocated copy if we have to modify
  const std::string* desc = inputdesc;    // points to (maybe modified) desc
  std::string* desc_copy = NULL;          // allocated copy if we have to modify

  /* 1) remove ignored characters (IGNORE option in affix file)            */
  if (!ignorechars.empty()) {
    std::size_t pos = word->find_first_of(ignorechars);
    if (pos != std::string::npos) {
      word_copy = new std::string(*word);
      do {
        word_copy->erase(pos, 1);
        pos = word_copy->find_first_of(ignorechars, pos);
      } while (pos != std::string::npos);
      word = word_copy;
    }
  }

  /* 2) reverse the strings when complex prefixes are used                 */
  if (complexprefixes) {
    if (!word_copy) {                   // we have no copy yet
      word_copy = new std::string(*word);
    }
    std::reverse(word_copy->begin(), word_copy->end());
    word = word_copy;

    /* description has to be reversed, too (if it is stored literally)     */
    if (desc && aliasm.empty()) {
      desc_copy = new std::string(*desc);
      std::reverse(desc_copy->begin(), desc_copy->end());
      desc = desc_copy;
    }
  }