// Sanity check
    if (dimensions == NULL)
        return 0;

    cmsUInt32Number size = 1;          // Running product
    cmsUInt32Number i;

    for (i = 0; i < b; ++i) {

        cmsUInt32Number dim = dimensions[i];

        // Each individual dimension must be nonâ€“zero
        if (dim == 0)
            return 0;

        // Check for overflow on the multiply (size * dim)
        if (size > (UINT32_MAX / dim))
            return 0;

        size *= dim;

        // Keep some headroom so that a later multiply by the number
        // of channels (<= cmsMAXCHANNELS) cannot overflow either.
        if (size > (UINT32_MAX / cmsMAXCHANNELS))
            return 0;
    }

    return size;