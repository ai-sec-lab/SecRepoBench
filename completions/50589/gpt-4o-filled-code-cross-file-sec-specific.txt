buffer.clear();
    while (true) {
        if (m_cachePos >= m_cache.size()) {
            if (!readNextBlock()) {
                return !buffer.empty();
            }
        }

        T currentChar = m_cache[m_cachePos++];
        if (currentChar == '\n') {
            return true;
        }

        if (currentChar != '\r') {
            buffer.push_back(currentChar);
        }
    }