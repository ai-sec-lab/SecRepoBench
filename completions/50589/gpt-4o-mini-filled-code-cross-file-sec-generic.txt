buffer.clear();
    m_cachePos = 0;

    // Read characters until we hit a newline or the end of the stream
    while (true) {
        if (m_cachePos >= m_cache.size()) {
            if (!readNextBlock()) {
                // If we reach the end of the stream and no data was read, return false
                return buffer.empty() ? false : true;
            }
            m_cachePos = 0; // Reset cache position after reading a new block
        }

        T currentChar = m_cache[m_cachePos++];
        
        // Skip end-of-line characters
        if (currentChar == '\n') {
            break; // End of line reached
        }

        // Append the character to the buffer
        buffer.push_back(currentChar);
    }

    return true; // Successfully read a line