// Clear the buffer to start fresh
    buffer.clear();
    m_cachePos = 0;

    // Read characters until we hit a newline or the end of the stream
    while (true) {
        // Check if we need to read more data into the cache
        if (m_cachePos >= m_cache.size()) {
            if (!readNextBlock()) {
                // If we can't read more data and the buffer is still empty, return false
                if (buffer.empty()) {
                    return false;
                }
                // End of stream reached, return true if we have read any data
                return true;
            }
            m_cachePos = 0; // Reset cache position after reading
        }

        // Read the next character from the cache
        T currentChar = m_cache[m_cachePos++];
        
        // Skip end-of-line characters
        if (currentChar == '\n' || currentChar == '\r') {
            // If we have read something into the buffer, we can return
            if (!buffer.empty()) {
                return true;
            }
            continue; // Skip to the next character
        }

        // Add the character to the buffer
        buffer.push_back(currentChar);
    }