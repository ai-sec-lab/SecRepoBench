size -= 8;
if (size < 8) {
    return 0;
}
i += 8;