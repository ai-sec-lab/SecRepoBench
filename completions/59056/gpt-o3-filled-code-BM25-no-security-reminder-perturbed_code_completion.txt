{
            // end-of-file reached
            if (n == nullptr) {
                // store the element that has just been parsed
                elements.insert(ElementMap::value_type(str, element));

                // top-level scopes are allowed to terminate on EOF
                if (isTopLevel) {
                    return;
                }

                // non-top-level scopes must have been closed properly â€“ this is an error
                delete_Element(element);
                ParseError("unexpected end of file");
            }

            // regular path: still inside the scope, just store the element
            elements.insert(ElementMap::value_type(str, element));
        }