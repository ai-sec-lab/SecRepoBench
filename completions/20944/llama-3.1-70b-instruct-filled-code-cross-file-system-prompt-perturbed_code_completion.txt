face = faceptr;
short_offset = (hb_face_get_table_format(face, HB_OT_TAG_head) == 1)? 2 : 0;
loca_table = hb_sanitize_context_create (face, HB_OT_TAG_loca, NULL, NULL);
glyf_table = hb_sanitize_context_create (face, HB_OT_TAG_glyf, NULL, NULL);
num_glyphs = (hb_sanitize_context_get_length (loca_table) - short_offset) / (short_offset + 2);