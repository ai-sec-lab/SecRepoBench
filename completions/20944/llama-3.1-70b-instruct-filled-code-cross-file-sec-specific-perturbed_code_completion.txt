// Calculate num_glyphs based on the length of the loca_table
if (short_offset == 0) {
    num_glyphs = (loca_table_length - 2) / 2;
} else {
    num_glyphs = (loca_table_length - 6) / 4;
}

// Validate num_glyphs to prevent potential heap overflow
if (num_glyphs > INT_MAX / sizeof(hb_glyph_info_t)) {
    // Handle error: num_glyphs exceeds maximum allowed value
    return;
}

// Allocate memory for glyf_table using a secure allocation function
glyf_table = calloc(num_glyphs, sizeof(hb_glyph_info_t));
if (glyf_table == NULL) {
    // Handle error: Memory allocation failed
    return;
}

// Initialize glyf_table with default values
for (int i = 0; i < num_glyphs; i++) {
    glyf_table[i].glyph_index = i;
    glyf_table[i].glyph_offset = 0;
    glyf_table[i].glyph_len = 0;
}