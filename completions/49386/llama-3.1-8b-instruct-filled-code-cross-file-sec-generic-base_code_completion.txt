// Loop through each tag entry in the profile's tag directory, reading the tag signature,
// offset, and size from the IO handler. Perform basic sanity checks to ensure the tag
// falls within the bounds of the file. If a tag passes the checks, record its signature,
// offset, and size in the Icc structure. Additionally, search for and record any links
// between tags that share the same offset and size, indicating they are linked. Finally,
// increment the tag count for each valid tag entry processed. Return TRUE if the tags are successfully read and processed.
for (i = 0; i < TagCount; i++) {
    cmsUInt32Number offset;
    cmsUInt32Number size;
    cmsTagSignature sig;
    cmsUInt32Number j;

    if (!_cmsReadUInt32Number(io, &offset)) return FALSE;
    if (!_cmsReadUInt32Number(io, &size)) return FALSE;
    if (!_cmsReadUInt32Number(io, &sig)) return FALSE;

    // Check if the tag falls within the bounds of the file
    if (offset + size > HeaderSize) {
        cmsSignalError(Icc ->ContextID, cmsERROR_RANGE, "Tag %d out of bounds", i);
        return FALSE;
    }

    // Check if the tag is already present in the Icc structure
    j = _cmsSearchTag(Icc, sig, FALSE);
    if (j >= 0) {
        // If the tag is already present, check if it's a link
        if (Icc ->TagLinked[j]!= (cmsTagSignature) 0) {
            // If it's a link, check if the current tag is the same as the linked tag
            if (Icc ->TagOffsets[j] == offset && Icc ->TagSizes[j] == size) {
                // If they are the same, increment the tag count for the linked tag
                Icc ->TagCount++;
                continue;
            }
        }
    }

    // If the tag is not present or not a link, add it to the Icc structure
    Icc ->TagOffsets[Icc ->TagCount] = offset;
    Icc ->TagSizes[Icc ->TagCount] = size;
    Icc ->TagSignatures[Icc ->TagCount] = sig;
    Icc ->TagLinked[Icc ->TagCount] = (cmsTagSignature) 0;
    Icc ->TagCount++;

    // Check if the tag is a link
    if (!_cmsReadUInt32Number(io, &j)) return FALSE;
    if (j!= 0) {
        // If it's a link, record the linked tag
        Icc ->TagLinked[Icc ->TagCount - 1] = j;
    }
}

// Set links between tags
SetLinks(Icc);

return TRUE;