elementInstanceTag = BitBufferReadSmall(bits, 4);
p->mActiveElements |= (1u << elementInstanceTag);

if (tag == ID_SCE || tag == ID_LFE)
{
    // mono or LFE channel
    status = alac_decode_mono(p, bits, sampleBuffer + channelIndex, numSamples, &bits1);
    RequireNoErr(status, goto Exit;);
    channelIndex++;
}
else if (tag == ID_CPE)
{
    // stereo pair
    status = alac_decode_stereo(p, bits, sampleBuffer + channelIndex, numSamples, &bits1, &bits2);
    RequireNoErr(status, goto Exit;);
    channelIndex += 2;
}
else if (tag == ID_END)
{
    goto NoMoreChannels;
}
else
{
    // unknown/unsupported element tag
    status = kALAC_ParamError;
    goto Exit;
}