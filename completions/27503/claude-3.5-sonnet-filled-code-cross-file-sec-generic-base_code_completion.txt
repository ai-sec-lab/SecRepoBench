#ifndef NDEBUG
        if (channelIndex >= numChannels)
            goto NoMoreChannels;
#endif

        switch (tag)
        {
            case ID_SCE:
            case ID_LFE:
                elementInstanceTag = BitBufferReadSmall(bits, 4);
                status = alac_decode_mono(p, bits, sampleBuffer + channelIndex, numSamples, numChannels);
                RequireNoErr(status, goto Exit;);
                channelIndex++;
                break;
            case ID_CPE:
                elementInstanceTag = BitBufferReadSmall(bits, 4);
                status = alac_decode_stereo(p, bits, sampleBuffer + channelIndex, numSamples, numChannels);
                RequireNoErr(status, goto Exit;);
                channelIndex += 2;
                break;
            case ID_END:
                goto NoMoreChannels;
            default:
                status = kALAC_ParamError;
                goto Exit;
        }