if (buf_size < 4) {
        av_log(avctx, AV_LOG_ERROR, "Buffer size is too small\n");
        return AVERROR_INVALIDDATA;
    }

    quality = buf[0]; // Extract the quality value from the first byte of the buffer

    if (quality < 0 || quality > 100) {
        av_log(avctx, AV_LOG_ERROR, "Invalid quality value: %d\n", quality);
        return AVERROR_INVALIDDATA;
    }

    // Additional checks can be added here if necessary