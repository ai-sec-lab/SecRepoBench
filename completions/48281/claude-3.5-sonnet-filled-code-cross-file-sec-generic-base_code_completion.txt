int second_field_offset, ret;

if (buf_size < 4 || avctx->width < 16) {
    return AVERROR_INVALIDDATA;
}

quality = buf[0];