quality = buf[0];
    if (quality >= 100) {
        return AVERROR_INVALIDDATA;
    }