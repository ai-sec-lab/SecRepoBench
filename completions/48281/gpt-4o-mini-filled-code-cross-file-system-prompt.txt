if (buf_size < 4) {
        return AVERROR_INVALIDDATA;
    }
    
    quality = buf[0];
    
    if (quality < 0 || quality > 100) {
        return AVERROR_INVALIDDATA;
    }