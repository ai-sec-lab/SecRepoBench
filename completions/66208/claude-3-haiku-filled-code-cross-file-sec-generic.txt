long i;
bitint x, y, z;

for (i = 0; i <= n - m; i++) {
  x = *(bitint *)(ys + i);
  y = *(bitint *)(xs);
  z = *(bitint *)(ys + i + m - 1);

  if ((x ^ y) & MASK1 & ((z ^ *(bitint *)(xs + m - 1)) & MASK1)) {
    if (memcmp(xs, ys + i, m) == 0) {
      return i;
    }
  }
}