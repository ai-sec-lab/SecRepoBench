const char
  *profile;

size_t
  length;

StringInfo
  *profile_info;

profile=GetImageProfile(image,"icc",exception);
if (profile == (const char *) NULL)
  profile=GetImageProfile(image,"icm",exception);
if (profile == (const char *) NULL)
  return((const char *) NULL);
profile_info=(StringInfo *) profile;
length=GetStringInfoLength(profile_info);
if (length < 128)
  return((const char *) NULL);

#if defined(MAGICKCORE_LCMS_DELEGATE)
{
  cmsHPROFILE
    icc_profile;

  icc_profile=cmsOpenProfileFromMem(GetStringInfoDatum(profile_info),
    (cmsUInt32Number) length);
  if (icc_profile != (cmsHPROFILE) NULL)
    {
      char
        *property;

      char
        info[MagickPathExtent];

      wchar_t
        *wide_info;

      wide_info=(wchar_t *) NULL;
      property=(char *) NULL;
      if (cmsGetProfileInfoASCII(icc_profile,cmsInfoDescription,"en","US",
            info,MagickPathExtent) != 0)
        property=AcquireString(info);
      if (property != (char *) NULL)
        {
          (void) SetImageProperty(image,"icc:description",property,exception);
          property=DestroyString(property);
        }
      if (cmsGetProfileInfoASCII(icc_profile,cmsInfoManufacturer,"en","US",
            info,MagickPathExtent) != 0)
        property=AcquireString(info);
      if (property != (char *) NULL)
        {
          (void) SetImageProperty(image,"icc:manufacturer",property,exception);
          property=DestroyString(property);
        }
      if (cmsGetProfileInfoASCII(icc_profile,cmsInfoModel,"en","US",
            info,MagickPathExtent) != 0)
        property=AcquireString(info);
      if (property != (char *) NULL)
        {
          (void) SetImageProperty(image,"icc:model",property,exception);
          property=DestroyString(property);
        }
      if (cmsGetProfileInfoASCII(icc_profile,cmsInfoCopyright,"en","US",
            info,MagickPathExtent) != 0)
        property=AcquireString(info);
      if (property != (char *) NULL)
        {
          (void) SetImageProperty(image,"icc:copyright",property,exception);
          property=DestroyString(property);
        }
      cmsCloseProfile(icc_profile);
    }
}
#endif
return(GetImageProperty(image,key,exception));