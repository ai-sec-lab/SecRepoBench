const char
    *profile;

  if (image == (Image *) NULL)
    return((const char *) NULL);
  profile=GetImageProperty(image,"icc",exception);
  if (profile == (const char *) NULL)
    profile=GetImageProperty(image,"icm",exception);
  if (profile == (const char *) NULL)
    return((const char *) NULL);
  if (strlen(profile) < 12)
    return((const char *) NULL);
#ifdef USE_LCMS2
  {
    cmsHPROFILE
      icc_profile;

    char
      *description,
      *manufacturer,
      *model,
      *copyright;

    icc_profile=cmsOpenProfileFromMem(profile,(size_t) strlen(profile));
    if (icc_profile == (cmsHPROFILE) NULL)
      return((const char *) NULL);
    description=cmsGetProfileDescription(icc_profile);
    manufacturer=cmsGetProfileManufacturer(icc_profile);
    model=cmsGetProfileModel(icc_profile);
    copyright=cmsGetProfileCopyright(icc_profile);
    (void) SetImageProperty(image,"description",description,exception);
    (void) SetImageProperty(image,"manufacturer",manufacturer,exception);
    (void) SetImageProperty(image,"model",model,exception);
    (void) SetImageProperty(image,"copyright",copyright,exception);
    cmsCloseProfile(icc_profile);
    if (description != (char *) NULL)
      cmsFree(description);
    if (manufacturer != (char *) NULL)
      cmsFree(manufacturer);
    if (model != (char *) NULL)
      cmsFree(model);
    if (copyright != (char *) NULL)
      cmsFree(copyright);
    return(GetImageProperty(image,key,exception));
  }
#else
  return(profile);
#endif