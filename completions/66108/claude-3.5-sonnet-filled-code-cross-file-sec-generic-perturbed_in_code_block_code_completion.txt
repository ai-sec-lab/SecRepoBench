if (remain >= size + 1) {
    if (sync[size] == 0xFF) {
        // Frame is ready to be sent
        mp3_dmx_check_pid(filter, ctx);
    } else if (remain >= size + 3 && sync[size] == 'T' && sync[size+1] == 'A' && sync[size+2] == 'G') {
        // ID3v1 tag detected, set flag to skip it
        skip_id3v1 = GF_TRUE;
    } else {
        // Invalid frame, attempt to resync
        GF_LOG(GF_LOG_WARNING, GF_LOG_MEDIA, ("[MP3Dmx] Invalid frame detected, attempting to resync\n"));
        bytes_to_drop = 1;
        continue;
    }
} else {
    // Not enough data to check, wait for more
    break;
}