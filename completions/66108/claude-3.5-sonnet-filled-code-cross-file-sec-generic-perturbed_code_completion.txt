if (remain >= size + 1) {
    if (sync[size] == 0xFF) {
        //ready to send packet
        mp3_dmx_check_pid(filter, ctx);

        if (!ctx->is_playing) {
            ctx->resume_from = (u32) (sync - ctx->mp3_buffer + 1);
            return GF_OK;
        }
        ctx->is_sync = GF_TRUE;
    } else if (remain >= size + 3 && sync[size] == 'T' && sync[size+1] == 'A' && sync[size+2] == 'G') {
        skip_id3v1 = GF_TRUE;
    } else {
        GF_LOG(GF_LOG_WARNING, GF_LOG_MEDIA, ("[MP3Dmx] Invalid frame at offset %d, attempting to resync\n", (u32)(sync - ctx->mp3_buffer)));
        bytes_to_drop = 1;
        continue;
    }
} else if (is_eos) {
    //ready to send packet
    mp3_dmx_check_pid(filter, ctx);

    if (!ctx->is_playing) {
        ctx->resume_from = (u32) (sync - ctx->mp3_buffer + 1);
        return GF_OK;
    }
    ctx->is_sync = GF_TRUE;
} else {
    break;
}