CASE(OP_EXT1, Z) {
  uint8_t ext_opcode;
  FETCH_B(ext_opcode);
  pc--;
  switch (ext_opcode) {
    case 0x00: // OP_EXT1_SEND
      {
        FETCH_BB(b, c);
        mid = syms[b];
        goto L_SEND_SYM;
      }
    case 0x01: // OP_EXT1_SENDB
      {
        FETCH_BB(b, c);
        mid = syms[b];
        goto L_SENDB_SYM;
      }
    case 0x02: // OP_EXT1_ENTER
      {
        FETCH_W(a);
        goto L_ENTER;
      }
    default:
      goto L_RAISE;
  }
}

CASE(OP_EXT2, Z) {
  uint16_t ext_opcode;
  FETCH_S(ext_opcode);
  pc -= 2;
  switch (ext_opcode) {
    case 0x0000: // OP_EXT2_SEND
      {
        FETCH_BB(b, c);
        mid = syms[b];
        goto L_SEND_SYM;
      }
    case 0x0001: // OP_EXT2_SENDB
      {
        FETCH_BB(b, c);
        mid = syms[b];
        goto L_SENDB_SYM;
      }
    case 0x0002: // OP_EXT2_ENTER
      {
        FETCH_W(a);
        goto L_ENTER;
      }
    default:
      goto L_RAISE;
  }
}

CASE(OP_EXT3, Z) {
  uint32_t ext_opcode;
  FETCH_L(ext_opcode);
  pc -= 4;
  switch (ext_opcode) {
    case 0x00000000: // OP_EXT3_SEND
      {
        FETCH_BB(b, c);
        mid = syms[b];
        goto L_SEND_SYM;
      }
    case 0x00000001: // OP_EXT3_SENDB
      {
        FETCH_BB(b, c);
        mid = syms[b];
        goto L_SENDB_SYM;
      }
    case 0x00000002: // OP_EXT3_ENTER
      {
        FETCH_W(a);
        goto L_ENTER;
      }
    default:
      goto L_RAISE;
  }
}