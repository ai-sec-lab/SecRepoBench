CASE(OP_EXT1, X) {
      insn = pc[1];
      pc++;
      switch (insn) {
      case OP_EXT1_CALL0:
        c = 0;
        goto L_SEND;
      case OP_EXT1_CALL1:
        c = 1;
        goto L_SEND;
      case OP_EXT1_CALL2:
        c = 2;
        goto L_SEND;
      case OP_EXT1_CALL3:
        c = 3;
        goto L_SEND;
      case OP_EXT1_CALL4:
        c = 4;
        goto L_SEND;
      case OP_EXT1_CALL5:
        c = 5;
        goto L_SEND;
      case OP_EXT1_CALL6:
        c = 6;
        goto L_SEND;
      case OP_EXT1_CALL7:
        c = 7;
        goto L_SEND;
      case OP_EXT1_CALL8:
        c = 8;
        goto L_SEND;
      case OP_EXT1_CALL9:
        c = 9;
        goto L_SEND;
      case OP_EXT1_CALL10:
        c = 10;
        goto L_SEND;
      case OP_EXT1_CALL11:
        c = 11;
        goto L_SEND;
      case OP_EXT1_CALL12:
        c = 12;
        goto L_SEND;
      case OP_EXT1_CALL13:
        c = 13;
        goto L_SEND;
      case OP_EXT1_CALL14:
        c = 14;
        goto L_SEND;
      case OP_EXT1_CALL15:
        c = 15;
        goto L_SEND;
      case OP_EXT1_CALL16:
        c = 16;
        goto L_SEND;
      case OP_EXT1_BLKCATCH:
        FETCH_BB();
        ch = catch_handler_find(mrb, mrb->c->ci, pc, MRB_CATCH_FILTER_BLOCK);
        if (ch) {
          goto L_CATCH;
        }
        else {
          mrb_value exc = regs[a];
          if (mrb_nil_p(exc)) {
            exc = mrb_exc_new_lit(mrb, E_RUNTIME_ERROR, "unexpected exception");
          }
          mrb_exc_set(mrb, exc);
          goto L_RAISE;
        }
        NEXT;
      case OP_EXT1_ENSURE:
        FETCH_BB();
        ch = catch_handler_find(mrb, mrb->c->ci, pc, MRB_CATCH_FILTER_ENSURE);
        if (ch) {
          goto L_CATCH;
        }
        else {
          mrb_value exc = regs[a];
          if (mrb_nil_p(exc)) {
            exc = mrb_exc_new_lit(mrb, E_RUNTIME_ERROR, "unexpected exception");
          }
          mrb_exc_set(mrb, exc);
          goto L_RAISE;
        }
        NEXT;
      case OP_EXT1_LAMBDA:
        c = OP_L_LAMBDA;
        goto L_MAKE_LAMBDA;
      case OP_EXT1_BLOCK:
        c = OP_L_BLOCK;
        goto L_MAKE_LAMBDA;
      case OP_EXT1_METHOD:
        c = OP_L_METHOD;
        goto L_MAKE_LAMBDA;
      case OP_EXT1_CAPTURE:
        c = OP_L_CAPTURE;
        goto L_MAKE_LAMBDA;
      case OP_EXT1_STRCAT:
        FETCH_B();
        mrb_str_concat(mrb, regs[a], regs[a+1]);
        NEXT;
      case OP_EXT1_GETUPVAR:
        FETCH_BBB();
        goto OP_GETUPVAR;
      case OP_EXT1_SETUPVAR:
        FETCH_BBB();
        goto OP_SETUPVAR;
      case OP_EXT1_BLKPUSH:
        FETCH_BS();
        goto OP_BLKPUSH;
      default:
        mrb_assert(!"unknown extended opcode");
      }
      pc--;
      JUMP;
    }
    CASE(OP_EXT2, X) {
      insn = pc[1];
      pc++;
      switch (insn) {
      case OP_EXT2_GETCONST:
        FETCH_BB();
        goto OP_GETCONST;
      case OP_EXT2_SETCONST:
        FETCH_BB();
        goto OP_SETCONST;
      case OP_EXT2_GETMCNST:
        FETCH_BB();
        goto OP_GETMCNST;
      case OP_EXT2_SETMCNST:
        FETCH_BB();
        goto OP_SETMCNST;
      case OP_EXT2_AREF:
        FETCH_BBB();
        goto OP_AREF;
      case OP_EXT2_ASET:
        FETCH_BBB();
        goto OP_ASET;
      case OP_EXT2_APOST:
        FETCH_BBB();
        goto OP_APOST;
      case OP_EXT2_CLASS:
        FETCH_BB();
        goto OP_CLASS;
      case OP_EXT2_MODULE:
        FETCH_BB();
        goto OP_MODULE;
      case OP_EXT2_DEF:
        FETCH_BB();
        goto OP_DEF;
      case OP_EXT2_ALIAS:
        FETCH_BB();
        goto OP_ALIAS;
      case OP_EXT2_UNDEF:
        FETCH_B();
        goto OP_UNDEF;
      default:
        mrb_assert(!"unknown extended opcode");
      }
      pc--;
      JUMP;
    }
    CASE(OP_EXT3, X) {
      insn = pc[1];
      pc++;
      switch (insn) {
      case OP_EXT3_SENDV:
        FETCH_BB();
        goto OP_SENDV;
      case OP_EXT3_SENDVB:
        FETCH_BB();
        goto OP_SENDVB;
      case OP_EXT3_SEND:
        FETCH_BBB();
        goto OP_SEND;
      case OP_EXT3_SUPER:
        FETCH_BB();
        goto OP_SUPER;
      case OP_EXT3_ARGARY:
        FETCH_BS();
        goto OP_ARGARY;
      case OP_EXT3_ENTER:
        FETCH_W();
        goto OP_ENTER;
      case OP_EXT3_KARG:
        FETCH_BB();
        goto OP_KARG;
      case OP_EXT3_KEY_P:
        FETCH_BB();
        goto OP_KEY_P;
      case OP_EXT3_KEYEND:
        goto OP_KEYEND;
      default:
        mrb_assert(!"unknown extended opcode");
      }
      pc--;
      JUMP;
    }