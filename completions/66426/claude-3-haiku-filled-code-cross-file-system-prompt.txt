bitint a, b, c, d;
  const bitint *ap = (const bitint*)xs;
  const bitint *bp = (const bitint*)ys;
  bitint x = *ap;
  bitint y;
  long i;

  for (i=0; i<m/sizeof(bitint); i++) {
    y = *bp++;
    a = (x ^ y) & MASK1;
    b = (a - MASK1) & ~a & MASK2;
    c = (b >> 7) & MASK3;
    d = c * MASK4;
    if (d) {
      return (mrb_int)((const char*)bp - ys - sizeof(bitint)) - i*sizeof(bitint);
    }
    x = *++ap;
  }

  return -1;