const char *s0 = xs;
  const char *s1 = ys;
  long i = 0;

  if (m <= 0 || n <= 0 || m > n) {
    return -1; // Invalid pattern or text length
  }

  // Initialize bit masks for the search
  bitint mask1 = MASK1;
  bitint mask2 = MASK2;
  bitint mask3 = MASK3;
  bitint mask4 = MASK4;

  // Prepare the pattern for searching
  bitint pattern = 0;
  for (long j = 0; j < m; j++) {
    pattern |= ((bitint)(*(s0 + j) & 0xff) << (j * 8));
  }

  // Perform the search using SWAR technique
  for (i = 0; i <= n - m; i += sizeof(bitint)) {
    bitint text = 0;
    for (long j = 0; j < sizeof(bitint) && (i + j) < n; j++) {
      text |= ((bitint)(*(s1 + i + j) & 0xff) << (j * 8));
    }

    // Compare the text with the pattern
    if (((text ^ pattern) & (mask1 | mask2 | mask3 | mask4)) == 0) {
      return i; // Match found
    }
  }

  return -1; // No match found