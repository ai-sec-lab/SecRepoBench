char buf[64];
  char *p, *n, *pend;
  double d;
  char *end;

  while (ISSPACE(*s)) s++;
  if (s[0] == '0' && (s[1] == 'x' || s[1] == 'X')) {
    s += 2;
    n = buf;
    pend = buf + sizeof(buf) - 1;
    while (*s) {
      if (ISXDIGIT(*s)) {
        *n++ = *s;
      } else if (*s != '_') {
        goto nocopy;
      }
      s++;
    }
  } else {
    n = buf;
    pend = buf + sizeof(buf) - 1;
    while (*s) {
      if (ISDIGIT(*s) || *s == '.' || *s == '-') {
        *n++ = *s;
      } else if (*s != '_') {
        goto nocopy;
      }
      s++;
    }
  }