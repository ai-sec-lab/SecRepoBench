if (!GetNextLine(buffer, line)) {
    ASSIMP_LOG_ERROR("OFF: Unexpected end of file while reading face");
    break;
}
sz = line;
unsigned int numIndices = strtoul10(sz, &sz);

if (numIndices > AI_MAX_FACE_INDICES) {
    ASSIMP_LOG_ERROR("OFF: Too many vertices for a single face");
    continue;
}

faces->mNumIndices = numIndices;
faces->mIndices = new unsigned int[numIndices];

for (unsigned int i = 0; i < numIndices; ++i) {
    SkipSpaces(&sz);
    unsigned int idx = strtoul10(sz, &sz);
    if (idx >= vertexCount) {
        ASSIMP_LOG_ERROR("OFF: Vertex index out of range");
        idx = 0;
    }
    faces->mIndices[i] = idx;
}

if (faces->mNumIndices < 3) {
    ASSIMP_LOG_ERROR("OFF: Encountered face with less than 3 indices");
    delete[] faces->mIndices;
    faces->mNumIndices = 0;
    faces->mIndices = nullptr;
} else {
    ++faces;
    ++i;
}

NextToken(&sz, end);