if(!GetNextLine(buffer, line)) {
    ASSIMP_LOG_ERROR("OFF: Unexpected EOF. Faces not completely loaded.");
    break;
}

sz = line;
unsigned int nInd = strtoul10(sz, &sz);

// Check for faces with no indices.
if (nInd == 0) {
    ASSIMP_LOG_ERROR("OFF: Face with zero indices encountered.");
    ++i; // Skip this invalid face.
    continue;
}

// The maximum number of vertex indices per face is limited to 32.
// This is an arbitrary limit, but it should be sufficient for most OFF models.
// Faces with more indices will be logged as errors and skipped.
if (nInd > AI_MAX_FACE_INDICES) {
    ASSIMP_LOG_ERROR("OFF: Face with too many indices encountered. Skipping.");
    ++i; // Skip this invalid face.
    continue;
}

faces[i].mNumIndices = nInd;
faces[i].mIndices = new unsigned int[nInd];

for (unsigned int j = 0; j < nInd; ++j) {
    SkipSpaces(&sz);
    unsigned int ind = strtoul10(sz, &sz);
    if (ind >= numVertices) {
        ASSIMP_LOG_ERROR("OFF: Vertex index out of range.");
        ind = 0; // Use index 0 as fallback.
    }
    faces[i].mIndices[j] = ind;
}
++i;