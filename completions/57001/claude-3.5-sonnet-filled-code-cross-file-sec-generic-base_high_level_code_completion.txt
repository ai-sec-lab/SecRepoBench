for (unsigned int i = 0; i < numFaces; ++i) {
    if (!GetNextLine(buffer, line)) {
        ASSIMP_LOG_ERROR("OFF: Unexpected EOF was encountered. Face definition incomplete");
        break;
    }

    sz = line;
    SkipSpaces(&sz);
    unsigned int numIndices = strtoul10(sz, &sz);

    if (numIndices < 3) {
        ASSIMP_LOG_WARN("OFF: Skipping face with less than 3 indices");
        continue;
    }

    faces->mNumIndices = numIndices;
    faces->mIndices = new unsigned int[numIndices];

    for (unsigned int j = 0; j < numIndices; ++j) {
        SkipSpaces(&sz);
        unsigned int idx = strtoul10(sz, &sz);

        if (idx >= numVertices) {
            ASSIMP_LOG_ERROR("OFF: Vertex index out of range");
            idx = 0;
        }

        faces->mIndices[j] = idx;
    }

    if (faces->mNumIndices) {
        ++faces;
        ++i;
    } else {
        ASSIMP_LOG_WARN("OFF: Skipping face with zero indices");
        --mesh->mNumFaces;
    }
}

mesh->mNumFaces = i;