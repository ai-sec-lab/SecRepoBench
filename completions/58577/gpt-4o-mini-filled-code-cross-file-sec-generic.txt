// Temporarily disable generational mode
  gc->generational = FALSE;

  // Perform the incremental sweep phase to clear old objects
  size_t limit = gc->live / 10; // Set a limit for the sweep phase
  incremental_sweep_phase(mrb, gc, limit);

  // Re-enable generational mode
  gc->generational = TRUE;

  // Reset the state of the garbage collector
  gc->state = MRB_GC_STATE_ROOT;
  gc->full = FALSE;
  gc->live_after_mark = gc->live; // Update the live count after marking