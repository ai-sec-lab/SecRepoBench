*framewidth = FFALIGN(*framewidth, w_align);
*height = FFALIGN(*height, h_align);

if (s->codec_id == AV_CODEC_ID_H264 || s->codec_id == AV_CODEC_ID_VP5 ||
    s->codec_id == AV_CODEC_ID_VP6 || s->codec_id == AV_CODEC_ID_VP6F ||
    s->codec_id == AV_CODEC_ID_VP6A || s->codec_id == AV_CODEC_ID_MPEG1VIDEO ||
    s->codec_id == AV_CODEC_ID_MPEG2VIDEO || s->codec_id == AV_CODEC_ID_MPEG4 ||
    s->codec_id == AV_CODEC_ID_VC1 || s->codec_id == AV_CODEC_ID_RV30 ||
    s->codec_id == AV_CODEC_ID_RV40 || s->codec_id == AV_CODEC_ID_VP8 ||
    s->codec_id == AV_CODEC_ID_VP9 || s->codec_id == AV_CODEC_ID_HEVC ||
    s->codec_id == AV_CODEC_ID_AV1) {
    // Adjust height for specific codecs
    *height = FFALIGN(*height, h_align << (s->lowres ? 1 : 0));
}

// Ensure minimum width for edge emulation
*framewidth = FFMAX(*framewidth, 32);