// Align the width and height to the specified w_align and h_align values.
    // Ensure that the width is at least 32 to provide enough temporary space for edge emulation.
    *width = (*width + w_align - 1) & ~(w_align - 1);
    *height = (*height + h_align - 1) & ~(h_align - 1);

    // Additional adjustments for specific codecs
    if (s->codec_id == AV_CODEC_ID_H264 || s->codec_id == AV_CODEC_ID_VP8 || 
        s->codec_id == AV_CODEC_ID_VP9 || s->codec_id == AV_CODEC_ID_HEVC) {
        if (*height < 32) {
            *height += 2; // Adjust height for motion compensation edge cases
        }
    }

    // Ensure minimum width
    if (*width < 32) {
        *width = 32;
    }