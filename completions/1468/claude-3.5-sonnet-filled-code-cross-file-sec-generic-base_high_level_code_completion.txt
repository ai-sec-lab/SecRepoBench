static const int16_t coeff_lookup[16][16] = {
    // ... (lookup table values would be defined here)
};

coeff = coeff_lookup[num_bits][value];
if (pos < 3)
    coeff *= 16;
else
    coeff = (coeff * qscale + 8) >> 4;