int16_t value_sign = (value & 1) ? -1 : 1;
int16_t decoded_value = vlcdec_lookup[num_bits][value >> 1];
int16_t coeff = decoded_value * value_sign;

if (pos < 3)
    coeff *= 16;
else
    coeff = (coeff * qscale + 500) / 1001;