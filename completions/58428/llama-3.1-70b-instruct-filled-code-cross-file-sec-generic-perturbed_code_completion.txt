// Initialize the contour points based on the end points of the contours.
contour_points.reserve(num_contours + 1);
contour_points.resize(num_contours + 1);

// Retrieve the end points of the contours from the header and validate the range.
if (unlikely(num_contours > endPtsOfContours.size() - 1)) return false;

// Allocate memory for the contour points, including space for phantom points.
if (phantom_only) {
    contour_points.reserve(contour_points.size() * 2);
    for (size_t i = 0; i < contour_points.size(); ++i) {
        contour_points.push_back(contour_point_t());
    }
}

// Set the end points of each contour in the points array.
for (size_t i = 0; i < num_contours; ++i) {
    contour_points[i].x = endPtsOfContours[i] >> 16;
    contour_points[i].y = endPtsOfContours[i] & 0xFFFF;
}