if (LocaleCompare(token, graphic_context[n]->id) == 0)
  break;
mvg_class = (const char *) GetValueFromSplayTree(macros, token);
if (mvg_class != (const char *) NULL)
{
  char
    *elements;

  size_t
    length;

  length = strlen(q)+(strlen(mvg_class)+strlen(primitive))*2+2;
  elements = AcquireString(primitive);
  elements = ResizeString(elements, length);
  if (elements == (char *) NULL)
    ThrowFatalException(ResourceLimitFatalError,"MemoryAllocationFailed");
  (void) ConcatenateString(&elements, mvg_class);
  (void) ConcatenateString(&elements, q);
  q = elements;
  primitive = DestroyString(primitive);
  primitive = elements;
  (void) SeekBlob(image, TellBlob(image) + (MagickOffsetType) 
    (q - primitive), SEEK_SET);
}