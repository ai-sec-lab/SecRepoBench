if (LocaleCompare("class",token) == 0)
  {
    /*
      Class context.
    */
    for (p=q; *q!= '\0'; )
    {
      if (GetNextToken(q,&q,extent,token) < 1)
        break;
      if (LocaleCompare(token,"pop")!= 0)
        continue;
      (void) GetNextToken(q,(const char **) NULL,extent,token);
      if (LocaleCompare(token,"class")!= 0)
        continue;
      break;
    }
    (void) GetNextToken(q,&q,extent,token);
    // Check if the current token matches the graphic context ID, break if true.
    // Retrieve the MVG class definition from the macros using the token.
    // If the class definition is found,
    // inject the class elements into the stream at the current offset.
    // Concatenate the MVG class to the elements string, followed by the remaining content.
    // Free the previous primitive string and update it with the new elements.
    // Adjust the stream pointer to the new position in the modified primitive.
    // <MASK>
    {
      const char
        *mvg_class;

      mvg_class=(const char *) GetValueFromSplayTree(macros,token);
      if (mvg_class!= (const char *) NULL)
      {
        clone_info=CloneDrawInfo((ImageInfo *) NULL,graphic_context[n]);
        (void) CloneString(&clone_info->primitive,mvg_class);
        status=RenderMVGContent(image,clone_info,depth+1,exception);
        clone_info=DestroyDrawInfo(clone_info);
      }
    }
    break;
  }