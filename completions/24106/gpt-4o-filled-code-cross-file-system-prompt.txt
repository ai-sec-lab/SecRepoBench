mvg_class=(const char *) GetValueFromSplayTree(macros,token);
if (mvg_class != (const char *) NULL)
{
  char
    *elements;

  size_t
    elements_length;

  if (graphic_context[n]->id != (char *) NULL)
    if (LocaleCompare(graphic_context[n]->id,token) == 0)
      break;
  elements_length=strlen(primitive)+(strlen(mvg_class)+1)+1;
  elements=(char *) AcquireQuantumMemory(elements_length,sizeof(*elements));
  if (elements == (char *) NULL)
    {
      status=MagickFalse;
      break;
    }
  (void) CopyMagickString(elements,primitive,(size_t) (p-primitive));
  (void) ConcatenateMagickString(elements,mvg_class,elements_length);
  (void) ConcatenateMagickString(elements,p,elements_length);
  primitive=DestroyString(primitive);
  primitive=elements;
  q=primitive+(p-primitive)+strlen(mvg_class);
}