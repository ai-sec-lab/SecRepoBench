if (token == next_token)
  ThrowPointExpectedException(token,exception);
if (LocaleCompare(token,graphic_context[graphiccontextindex]->id) == 0)
  break;
mvg_class=(const char *) GetValueFromSplayTree(macros,token);
if (mvg_class != (const char *) NULL)
{
  size_t
    length;

  length=strlen(q)+strlen(mvg_class)+1;
  if (length > extent)
  {
    extent=length;
    primitive=(char *) ResizeQuantumMemory(primitive,extent+MagickPathExtent,
      sizeof(*primitive));
    if (primitive == (char *) NULL)
    {
      (void) ThrowMagickException(exception,GetMagickModule(),
        ResourceLimitError,"MemoryAllocationFailed","`%s'",
        image->filename);
      break;
    }
  }
  q=primitive+strlen(primitive);
  (void) CopyMagickString(q,mvg_class,extent);
  (void) ConcatenateMagickString(q,q+strlen(token),extent);
  q=primitive;
}