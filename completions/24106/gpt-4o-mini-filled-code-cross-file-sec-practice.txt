mvg_class=GetValueFromSplayTree(macros,token);
            if (mvg_class != (const char *) NULL)
              {
                // Inject the class elements into the stream at the current offset.
                char *new_elements = AcquireString(mvg_class);
                // Concatenate the MVG class to the elements string.
                size_t new_length = strlen(new_elements) + strlen(primitive) + 1;
                char *updated_primitive = (char *) AcquireQuantumMemory(new_length, sizeof(char));
                if (updated_primitive == (char *) NULL)
                  {
                    DestroyString(new_elements);
                    status = MagickFalse;
                    break;
                  }
                // Copy the existing primitive and append the new class elements.
                (void) FormatLocaleString(updated_primitive, new_length, "%s %s", new_elements, primitive);
                DestroyString(primitive);
                primitive = updated_primitive;
                // Adjust the stream pointer to the new position in the modified primitive.
                q = primitive + strlen(primitive);
                DestroyString(new_elements);
              }