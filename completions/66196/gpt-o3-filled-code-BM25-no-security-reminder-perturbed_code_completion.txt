/*lookup tables – values are expressed in kbps                                    */
	static const u16 mp3_br_table[2 /*ver*/][3 /*layer*/][16 /*index*/] = {
		/* MPEG-2 / 2.5 ------------------------------------------------------------*/
		{
			/*Layer I*/  { 0, 32, 48, 56,  64,  80,  96, 112, 128, 144, 160, 176, 192, 224, 256, 0 },
			/*Layer II*/ { 0,  8, 16, 24,  32,  40,  48,  56,  64,  80,  96, 112, 128, 144, 160, 0 },
			/*Layer III*/{ 0,  8, 16, 24,  32,  40,  48,  56,  64,  80,  96, 112, 128, 144, 160, 0 }
		},
		/* MPEG-1 ------------------------------------------------------------------*/
		{
			/*Layer I*/  { 0, 32, 64,  96, 128, 160, 192, 224, 256, 288, 320, 352, 384, 416, 448, 0 },
			/*Layer II*/ { 0, 32, 48,  56,  64,  80,  96, 112, 128, 160, 192, 224, 256, 320, 384, 0 },
			/*Layer III*/{ 0, 32, 40,  48,  56,  64,  80,  96, 112, 128, 160, 192, 224, 256, 320, 0 }
		}
	};

	/*invalid bitrate index (0 = free, 15 = bad)*/
	if ((bitrateIdx == 0) || (bitrateIdx == 15))
		return 0;

	/*compute layer table index – gf_mp3_layer() returns:
	  1: Layer I, 2: Layer II, 3: Layer III                                  */
	if ((layer < 1) || (layer > 3))
		return 0;

	/*version index: 1 -> MPEG-1, 0 -> MPEG-2 / 2.5                           */
	u8 ver_idx = (version == 3) ? 1 : 0;
	u8 layer_idx = (u8)(layer - 1);

	/*return bitrate in bits per second                                       */
	return (u32) mp3_br_table[ver_idx][layer_idx][bitrateIdx] * 1000;