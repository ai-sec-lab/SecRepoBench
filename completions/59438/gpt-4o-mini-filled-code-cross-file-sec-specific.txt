const unsigned char *current = uc;
	size_t record_count = 0;
	size_t tapemark_count = 0;

	while (current < ue) {
		size_t length = getlen(current, ue);
		if (length == 0 || current + length > ue) {
			return 0; // Invalid length or out of bounds
		}

		if (length == 4 && memcmp(current, "\xFF\xFF\xFF\xFF", 4) == 0) {
			tapemark_count++;
			if (tapemark_count >= SIMH_TAPEMARKS) {
				break; // Reached tapemark limit
			}
		} else {
			record_count++;
		}

		current += length;
	}

	return (record_count > 0) ? 1 : 0; // Return 1 if valid data found