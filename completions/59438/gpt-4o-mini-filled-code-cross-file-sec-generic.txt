const unsigned char *current = uc;
    size_t record_count = 0;
    size_t tapemark_count = 0;

    while (current < ue) {
        // Get the length of the current record
        size_t record_length = getlen(current, ue);
        if (record_length == 0 || current + record_length > ue) {
            return 0; // Invalid record length
        }

        // Check for End of Medium (EOM) marker
        if (record_length == 4 && memcmp(current, "\xFF\xFF\xFF\xFF", 4) == 0) {
            break; // EOM found
        }

        // Increment record count
        record_count++;

        // Move the current pointer past the record
        current += record_length;

        // Check for tapemark
        if (tapemark_count < SIMH_TAPEMARKS) {
            tapemark_count++;
        } else {
            break; // Reached the predefined limit of tapemarks
        }
    }

    // If we have valid records and tapemarks, return success
    return (record_count > 0) ? 1 : 0;