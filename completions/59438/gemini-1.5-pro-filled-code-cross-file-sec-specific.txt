const unsigned char *ucp = uc;
	size_t l, l2;
	int tm = 0;
	int nr = 0;

	while (ucp < ue) {
		l = getlen(ucp, ue);
		if (l == 0)
			return 0;	// Invalid length
		if (l == 0xFFFFFFFFU)
			break;		// EOM
		ucp += SIMH_LEN;
		if (ucp + l > ue)
			return 0;	// Invalid record length
		l2 = getlen(ucp + l, ue);
		if (l != l2)
			return 0;	// Length mismatch
		ucp += l + SIMH_LEN;
		if (l == 0) {
			if (++tm == SIMH_TAPEMARKS)
				break;		// Reached tapemark limit
		} else {
			nr++;
		}
	}
	return (nr > 0 || tm > 0) ? 1 : 0;	// Valid SIMH data found