// <MASK>
hb_hashmap_t<hb_codepoint_t, glyph_variations_t> new_glyph_variations;

for (const auto& pair : new_to_old_glyph_map)
{
    hb_codepoint_t new_gid = pair.first;
    hb_codepoint_t old_gid = pair.second;

    if (!get_glyph_variations(old_gid, glyph_vars))
    {
        // Handle the case where the first glyph ID is zero and the NOTDEF_OUTLINE flag is not set
        if (new_gid == 0 && !(c->plan->flags & HB_SUBSET_FLAGS_NO_NOTDEF_OUTLINE))
        {
            new_glyph_variations.set(new_gid, glyph_variations_t());
        }
        else
        {
            return false;
        }
    }
    else
    {
        new_glyph_variations.set(new_gid, glyph_vars);
    }
}

if (unlikely(new_glyph_variations.get_population() != new_to_old_glyph_map.length()))
    return false;

c->plan->create_glyph_variations(c->plan->get_axis_count(),
                                 c->plan->get_shared_tuples(),
                                 new_glyph_variations);