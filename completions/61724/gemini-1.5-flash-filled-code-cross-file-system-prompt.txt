typedef std::unordered_map<hb_codepoint_t, glyph_variation_data_t> glyph_variation_map_t;
    glyph_variation_map_t glyph_variation_map;

    for (auto const& [new_glyph_id, old_glyph_id] : new_glyph_id_to_old_glyph_id_map_) {
      glyph_variation_data_t glyph_variation_data;
      if (!get_glyph_variation_data(old_glyph_id, glyph_variation_data)) {
        return false;
      }
      glyph_variation_map[new_glyph_id] = glyph_variation_data;
    }

    if (new_glyph_id_to_old_glyph_id_map_.empty() && !flags_.test(NOTDEF_OUTLINE)) {
      glyph_variation_map[0] = glyph_variation_data_t{};
    }

    if (!create_glyph_variations(c, axis_count_, shared_tuples_, plan_, glyph_variation_map)) {
      return false;
    }

    glyph_vars = glyph_variation_map;
    return true;