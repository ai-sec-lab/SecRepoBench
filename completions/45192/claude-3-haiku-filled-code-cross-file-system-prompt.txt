int i = 0;
  while (srclen > 0) {
    unsigned char byte = *src++;
    srclen--;
    n = (n << 7) | (byte & 0x7F);
    if ((byte & 0x80) == 0) {
      break;
    }
    i++;
    if (i > 8) {
      mrb_raise(mrb, E_RANGE_ERROR, "BER integer too large");
    }
  }