for (i = 0; srclen > 0; i++) {
  unsigned char byte = *src++;
  srclen--;
  n = (n << 7) | (byte & 0x7F);
  if ((byte & 0x80) == 0) {
    if (n > INT_MAX) {
      mrb_raise(mrb, E_RANGE_ERROR, "integer too big to convert to `mrb_int'");
    }
    break;
  }
}