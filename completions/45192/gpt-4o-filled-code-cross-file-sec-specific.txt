for (i = 0; i < srclen; i++) {
    if (n > (INT_MAX >> 7)) {
        mrb_raise(mrb, E_RANGE_ERROR, "BER integer too large");
    }
    n = (n << 7) | (src[i] & 0x7F);
    if ((src[i] & 0x80) == 0) {
        break;
    }
}
if (i == srclen) {
    mrb_raise(mrb, E_RANGE_ERROR, "BER integer not terminated");
}