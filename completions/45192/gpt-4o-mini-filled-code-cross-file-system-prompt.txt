while (srclen > 0) {
    unsigned char byte = *src++;
    n = (n << 7) | (byte & 0x7F);
    srclen--;
    if (!(byte & 0x80)) {
      break; // Stop if the 8th bit is not set
    }
    if (n < 0) {
      mrb_raise(mrb, E_RANGE_ERROR, "unpack(BER): integer overflow");
    }
  }
  i = (int)(src - (const unsigned char *)src);