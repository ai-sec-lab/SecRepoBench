if (y->sn == 0) {
  *v = 0;
  return TRUE;
}

if (y->sz > 1 || (y->sz == 1 && y->p[0] > (mp_limb)MRB_INT_MAX)) {
  return FALSE;
}

i = y->p[0];
if (y->sn < 0) {
  if (i > (mp_limb)MRB_INT_MIN) {
    return FALSE;
  }
  i = -i;
}