mpz_t *y = *mpzptr;
if (y->sz == 0) {
  i = 0;
} else if (y->sz > 2 || (y->sz == 2 && y->p[1] > 1)) {
  return FALSE;
} else {
  i = y->p[0];
  if (y->sz == 2) {
    i |= ((mp_limb)y->p[1]) << DIGITBITS;
  }
  if (y->sn < 0) {
    i = -i;
  }
}

if (i < MRB_INT_MIN || i > MRB_INT_MAX) {
  return FALSE;
}