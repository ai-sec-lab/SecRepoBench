// walk through the source string and extract the comma-separated numbers
      int index = 0;
      while (*src && index < len) {
        unsigned long value = 0;
        bool got_digit = false;

        // read one decimal number
        while (*src && *src != ',') {
          if (isdigit(static_cast<unsigned char>(*src))) {
            got_digit  = true;
            value = value * 10 + static_cast<unsigned char>(*src - '0');
          }
          ++src;
        }

        // sanity checks on the extracted number
        if (value >= DEFAULTFLAGS && af != NULL) {
          HUNSPELL_WARNING(stderr,
                           "error: line %d: flag id %lu is too large (max: %d)\n",
                           af->getlinenum(), value, DEFAULTFLAGS - 1);
          value = 0;
        }
        if (value == 0 && af != NULL) {
          HUNSPELL_WARNING(stderr, "error: line %d: 0 is wrong flag id\n",
                           af->getlinenum());
        }

        dest[index++] = static_cast<unsigned short>(value);

        // skip over the comma, if present, and continue
        if (*src == ',')
          ++src;
      }
      break;