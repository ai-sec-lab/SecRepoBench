if (s->num_primitive_matrices > max_primitive_matrices) {
        av_log(m->avctx, AV_LOG_ERROR, "Number of primitive matrices exceeds maximum allowed.\n");
        return AVERROR_INVALIDDATA;
    }

    for (mat = 0; mat < s->num_primitive_matrices; mat++) {
        ch = get_bits(gbp, 5); // Assuming channel index is 5 bits
        if (ch >= s->max_matrix_channel) {
            av_log(m->avctx, AV_LOG_ERROR, "Output channel index %u exceeds max channel %u.\n", ch, s->max_matrix_channel);
            return AVERROR_INVALIDDATA;
        }

        int fractional_bits = get_bits(gbp, 4);
        if (fractional_bits > 14) {
            av_log(m->avctx, AV_LOG_ERROR, "Fractional bits %d exceed maximum of 14.\n", fractional_bits);
            return AVERROR_INVALIDDATA;
        }

        // Additional processing for coefficients and noise type...
        // ...
    }