DrawInfo
    **graphic_context;

  MagickBooleanType
    status;

  PrimitiveInfo
    *primitive_info;

  register ssize_t
    i;

  size_t
    length,
    n;

  StopInfo
    *stops;

  /*
    Set the image clip mask.
  */
  token=AcquireString(draw_info->geometry);
  (void) SetImageClipMask(image,draw_info->clip_mask,exception);
  primitive_info=(PrimitiveInfo *) NULL;
  stops=(StopInfo *) NULL;
  n=0;
  graphic_context=(DrawInfo **) AcquireQuantumMemory(n+1,sizeof(*graphic_context));
  if (graphic_context == (DrawInfo **) NULL)
    {
      token=DestroyString(token);
      ThrowBinaryException(ResourceLimitError,"MemoryAllocationFailed",
        image->filename);
    }
  graphic_context[n]=CloneDrawInfo((ImageInfo *) NULL,draw_info);
  if (graphic_context[n] == (DrawInfo *) NULL)
    {
      token=DestroyString(token);
      graphic_context=(DrawInfo **) RelinquishMagickMemory(graphic_context);
      ThrowBinaryException(ResourceLimitError,"MemoryAllocationFailed",
        image->filename);
    }
  primitive=AcquireString("");
  if (primitive == (char *) NULL)
    {
      token=DestroyString(token);
      for ( ; n >= 0; n--)
        graphic_context[n]=DestroyDrawInfo(graphic_context[n]);
      graphic_context=(DrawInfo **) RelinquishMagickMemory(graphic_context);
      ThrowBinaryException(ResourceLimitError,"MemoryAllocationFailed",
        image->filename);
    }
  (void) memset(&affine,0,sizeof(affine));
  affine.sx=1.0;
  affine.sy=1.0;
  GetAffineMatrix(&current);
  status=MagickTrue;
  if (image->debug != MagickFalse)
    (void) LogMagickEvent(DrawEvent,GetMagickModule(),"begin draw-image");
  for (q=draw_info->primitive; *q != '\0'; )
  {
    /*
      Interpret drawing command.
    */
    GetNextToken(q,&q,MagickPathExtent,keyword);
    if (*keyword == '\0')
      break;
    if (image->debug != MagickFalse)
      (void) LogMagickEvent(DrawEvent,GetMagickModule(),"%s",keyword);
    if ((*keyword == '#') && (draw_info->compliance != SVGCompliance))
      {
        /*
          Comment.
        */
        while ((*q != '\n') && (*q != '\0'))
          q++;
        continue;
      }