// Handle encoding errors encountered during XML parsing.
// Check if the input does not conform to UTF-8 encoding.
// Report an encoding error with details about the problematic bytes.
// Terminate the parsing process upon encountering this error.
void
encoding_error(xmlParserCtxtPtr parserContext) {
    int i;
    xmlChar *ptr = parserContext->input->cur;
    xmlChar *end = parserContext->input->cur + parserContext->input->end - parserContext->input->base;

    xmlGenericError(xmlGenericErrorContext, "encoding error\n");
    for (i = 0; i < 10 && ptr < end; i++) {
        xmlGenericError(xmlGenericErrorContext, "%02x ", *ptr);
        ptr++;
    }
    xmlGenericError(xmlGenericErrorContext, "\n");
    xmlHaltParser(parserContext);
    parserContext->errNo = XML_ERR_INVALID_ENCODING;
}