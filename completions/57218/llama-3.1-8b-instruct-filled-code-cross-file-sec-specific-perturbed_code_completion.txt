if ('\"'!= *currentChar) {
    LogWarning("Bone name is expected to be enclosed in "
        "double quotation marks. ");
    bQuota = false;
} else {
    ++currentChar;
}

const char* szEnd = currentChar;
for ( ;; ) {
    if (bQuota && '\"' == *szEnd) {
        iBone = (unsigned int)(szEnd - currentChar);
        ++szEnd;
        break;
    } else if (!bQuota && IsSpaceOrNewLine(*szEnd)) {
        iBone = (unsigned int)(szEnd - currentChar);
        break;
    } else if (!(*szEnd)) {
        LogErrorNoThrow("Unexpected EOF/EOL while parsing bone name");
        SMDI_PARSE_RETURN;
    }
    ++szEnd;
}
bone.mName = std::string(currentChar,iBone);
currentChar = szEnd;

// Check if the bone name is valid
if (bone.mName.empty()) {
    LogErrorNoThrow("Bone name is empty");
    SMDI_PARSE_RETURN;
}

// Check if the bone name is too long
if (bone.mName.length() > MAX_BONE_NAME_LENGTH) {
    LogErrorNoThrow("Bone name is too long");
    SMDI_PARSE_RETURN;
}

// Check if the bone name contains invalid characters
if (!IsValidBoneName(bone.mName)) {
    LogErrorNoThrow("Bone name contains invalid characters");
    SMDI_PARSE_RETURN;
}

//... rest of the function remains the same...