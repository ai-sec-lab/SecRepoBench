char
  colorspace[MagickPathExtent];

MagickBooleanType
  icc_color;

/*
  Parse color specification.
*/
(void) CopyMagickString(colorspace,name,MagickPathExtent);
for (i=0; colorspace[i] != '\0'; i++)
  if (colorspace[i] == '(')
    break;
colorspace[i--]='\0';
scale=(double) ScaleCharToQuantum(1);
icc_color=MagickFalse;
if (LocaleNCompare(colorspace,"device-",7) == 0)
  {
    (void) CopyMagickString(colorspace,colorspace+7,MagickPathExtent);
    scale=(double) QuantumRange;
    icc_color=MagickTrue;
  }
if (LocaleCompare(colorspace,"icc-color") == 0)
  {
    register ssize_t
      j;

    (void) CopyMagickString(colorspace,name+i+2,MagickPathExtent);
    for (j=0; colorspace[j] != '\0'; j++)
      if (colorspace[j] == ',')
        break;
    colorspace[j--]='\0';
    i+=j+3;
    scale=(double) QuantumRange;
    icc_color=MagickTrue;
  }
LocaleLower(colorspace);
color->alpha_trait=UndefinedPixelTrait;
if ((i > 0) && (colorspace[i] == 'a'))
  {
    colorspace[i]='\0';
    color->alpha_trait=BlendPixelTrait;
  }