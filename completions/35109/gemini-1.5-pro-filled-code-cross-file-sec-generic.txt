while (p < end && ISDIGIT(*p)) {
    int n = *p - '0';
    if (mrb_int_mul_overflow(next_n, 10, &next_n) || next_n + n < next_n || next_n + n > MRB_INT_MAX) {
      return NULL;
    }
    next_n += n;
    p++;
  }
  if (p >= end) {
    mrb_raise(mrb, E_ARGUMENT_ERROR, "malformed format string - %%*[0-9]");
  }