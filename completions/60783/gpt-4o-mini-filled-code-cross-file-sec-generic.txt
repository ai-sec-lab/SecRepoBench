if (!vpar) {
        av_log(NULL, AV_LOG_ERROR, "Invalid AVCodecParameters provided.\n");
        return false; // Return false if vpar is NULL
    }

    if (flv_codecid == 0) {
        // If codec ID is not set, return true
        return true;
    }

    switch (flv_codecid) {
        case AV_CODEC_ID_HEVC:
            return vpar->codec_id == AV_CODEC_ID_HEVC;
        case AV_CODEC_ID_AV1:
            return vpar->codec_id == AV_CODEC_ID_AV1;
        case AV_CODEC_ID_VP9:
            return vpar->codec_id == AV_CODEC_ID_VP9;
        case AV_CODEC_ID_FLV1:
            return vpar->codec_id == AV_CODEC_ID_FLV1;
        case AV_CODEC_ID_FLASHSV:
            return vpar->codec_id == AV_CODEC_ID_FLASHSV;
        case AV_CODEC_ID_FLASHSV2:
            return vpar->codec_id == AV_CODEC_ID_FLASHSV2;
        case AV_CODEC_ID_VP6F:
            return vpar->codec_id == AV_CODEC_ID_VP6F;
        case AV_CODEC_ID_VP6A:
            return vpar->codec_id == AV_CODEC_ID_VP6A;
        case AV_CODEC_ID_H264:
            return vpar->codec_id == AV_CODEC_ID_H264;
        default:
            // If codec ID does not match known codecs, compare codec tag
            return vpar->codec_tag == (flv_codecid >> FLV_VIDEO_CODECID_OFFSET);
    }