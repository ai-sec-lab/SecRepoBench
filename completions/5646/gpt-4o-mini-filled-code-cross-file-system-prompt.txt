// Null-terminate the token string.
  token[i] = '\0';

  // Check if the token starts with "url(".
  if (strncmp(token, "url(", 4) == 0)
  {
    // Extract the actual URL by skipping the "url(" prefix.
    p += 4; // Move past "url("
    // Skip optional '#' character.
    if (*p == '#')
      p++;
    
    // Copy the URL to the beginning of the token string, replacing the original content.
    i = 0; // Reset index for token
    while (*p != '\0' && *p != ')') // Copy until we reach the closing parenthesis
    {
      if (i < (ssize_t)(extent - 1))
        token[i++] = *p;
      p++;
    }
    // Null-terminate the token string after copying the URL.
    token[i] = '\0';
  }