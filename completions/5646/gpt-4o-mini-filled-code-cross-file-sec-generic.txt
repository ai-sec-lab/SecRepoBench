// Null-terminate the token string.
  token[i] = '\0';

  // Check if the token starts with "url(".
  const char *url_prefix = "url(";
  size_t url_prefix_length = strlen(url_prefix);
  
  if (strncmp(token, url_prefix, url_prefix_length) == 0) {
    const char *url_start = token + url_prefix_length;
    
    // Skip optional '#' character.
    if (*url_start == '#') {
      url_start++;
    }

    // Copy the actual URL to the beginning of the token string.
    i = 0; // Reset index for token
    while (*url_start != '\0' && *url_start != ')') {
      if (i < (ssize_t)(extent - 1)) {
        token[i++] = *url_start;
      }
      url_start++;
    }
    
    // Null-terminate the token string after copying the URL.
    token[i] = '\0';
  }