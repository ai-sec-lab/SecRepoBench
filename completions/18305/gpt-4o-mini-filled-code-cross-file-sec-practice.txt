// Retrieve and possibly set EXIF properties for the image.
    // Check if the option to retrieve EXIF properties is enabled.
    option = GetImageOption(image_info, "tiff:exif-properties");
    if (option == (const char *) NULL || LocaleCompare(option, "true") == 0)
    {
        // Retrieve EXIF properties if the option is enabled.
        TIFFGetEXIFProperties(tiff, image, exception);
    }

    // Fetch the resolution properties of the image using TIFF tags.
    if (TIFFGetFieldDefaulted(tiff, TIFFTAG_XRESOLUTION, &x_resolution) == 1)
    {
        image->resolution.x = x_resolution;
    }
    if (TIFFGetFieldDefaulted(tiff, TIFFTAG_YRESOLUTION, &y_resolution) == 1)
    {
        image->resolution.y = y_resolution;
    }

    // Ensure that the resolution is valid before setting it.
    if (image->resolution.x <= 0.0 || image->resolution.y <= 0.0)
    {
        ThrowReaderException(CorruptImageError, "InvalidImageResolution");
    }