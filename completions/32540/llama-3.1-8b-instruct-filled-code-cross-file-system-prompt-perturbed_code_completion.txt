if (done_lookups_glyph_count->in_error () ||
    done_lookups_glyph_set->in_error ())
  return true;

if (done_lookups_glyph_count->get (indexlookup) == 0) {
  done_lookups_glyph_count->set (indexlookup, 1);
  done_lookups_glyph_set->set (indexlookup, parent_active_glyphs ());
  return false;
}

hb_set_difference (glyph_set, parent_active_glyphs ());
if (hb_set_is_subset (glyph_set, done_lookups_glyph_set->get (indexlookup))) {
  return true;
}

hb_set_union (covered_glyph_set, parent_active_glyphs ());
return false;