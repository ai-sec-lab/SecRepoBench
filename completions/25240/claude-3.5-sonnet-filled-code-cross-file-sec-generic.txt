case 'K':
    if (m_DataIt + 1 == m_DataItEnd) break;
    ++m_DataIt;
    switch (*m_DataIt) {
        case 'a': // Ambient color
            ++m_DataIt;
            getColorRGBA(&m_pModel->m_pCurrentMaterial->ambient);
            break;
        case 'd': // Diffuse color
            ++m_DataIt;
            getColorRGBA(&m_pModel->m_pCurrentMaterial->diffuse);
            break;
        case 's': // Specular color
            ++m_DataIt;
            getColorRGBA(&m_pModel->m_pCurrentMaterial->specular);
            break;
        case 'e': // Emissive color
            ++m_DataIt;
            getColorRGBA(&m_pModel->m_pCurrentMaterial->emissive);
            break;
        case 't': // Transmission color
            ++m_DataIt;
            getColorRGBA(&m_pModel->m_pCurrentMaterial->transparent);
            break;
        default:
            m_DataIt = skipLine<DataArrayIt>(m_DataIt, m_DataItEnd, m_uiLine);
            break;
    }
    break;
case 'd': // Transparency
    ++m_DataIt;
    getFloatValue(m_pModel->m_pCurrentMaterial->alpha);
    break;
case 'T': // Transparency (inverted)
    ++m_DataIt;
    getFloatValue(m_pModel->m_pCurrentMaterial->alpha);
    m_pModel->m_pCurrentMaterial->alpha = 1.0f - m_pModel->m_pCurrentMaterial->alpha;
    break;
case 'N': // Shininess
    ++m_DataIt;
    switch (*m_DataIt) {
        case 's':
            ++m_DataIt;
            getFloatValue(m_pModel->m_pCurrentMaterial->shininess);
            break;
        case 'i': // Index of refraction
            ++m_DataIt;
            getFloatValue(m_pModel->m_pCurrentMaterial->ior);
            break;
        default:
            m_DataIt = skipLine<DataArrayIt>(m_DataIt, m_DataItEnd, m_uiLine);
            break;
    }
    break;
case 'n': // New material
    createMaterial();
    m_DataIt = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    m_pModel->m_pCurrentMaterial->MaterialName.Set(m_DataIt, static_cast<unsigned int>(m_DataItEnd - m_DataIt));
    break;
case 'm': // Texture
    ++m_DataIt;
    if (m_DataIt < m_DataItEnd) {
        switch (*m_DataIt) {
            case 'a':
                ++m_DataIt;
                getTexture(m_pModel->m_pCurrentMaterial->textureAmbient);
                break;
            case 'd':
                ++m_DataIt;
                getTexture(m_pModel->m_pCurrentMaterial->textureDiffuse);
                break;
            case 's':
                ++m_DataIt;
                getTexture(m_pModel->m_pCurrentMaterial->textureSpecular);
                break;
            case 'b':
                ++m_DataIt;
                getTexture(m_pModel->m_pCurrentMaterial->textureBump);
                break;
            default:
                m_DataIt = skipLine<DataArrayIt>(m_DataIt, m_DataItEnd, m_uiLine);
                break;
        }
    }
    break;
case 'i': // Illumination model
    m_DataIt = getNextToken<DataArrayIt>(m_DataIt, m_DataItEnd);
    getIntValue(m_pModel->m_pCurrentMaterial->illumination_model);
    break;
case 'a': // Anisotropy
    ++m_DataIt;
    if (*m_DataIt == 'n') {
        ++m_DataIt;
        getFloatValue(m_pModel->m_pCurrentMaterial->anisotropy);
    }
    break;