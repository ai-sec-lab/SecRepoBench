if (s->codec_id == AV_CODEC_ID_HAP || s->codec_id == AV_CODEC_ID_HAP_ALPHA) {
        // Align width to multiple of 4
        *width = FFALIGN(*width, 4);
    }

    for (i = 0; i < AV_NUM_DATA_POINTERS; i++)
        linesize_align[i] = FFMAX(linesize_align[i], 16);