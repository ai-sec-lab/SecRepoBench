for (index = 0; index < AV_NUM_DATA_POINTERS; index++) {
        int linesize_align = 1;

        if (index == 1 || index == 2) {
            linesize_align = 16;
        } else if (index == 0 && s->pix_fmt == AV_PIX_FMT_YUV420P && s->codec_id == AV_CODEC_ID_H264) {
            linesize_align = 32;
        }

        if (linesize_align_ptr)
            linesize_align = linesize_align_ptr[index];

        if (s->linesize[index] > 0)
            s->linesize[index] = FFALIGN(s->linesize[index], linesize_align);
    }