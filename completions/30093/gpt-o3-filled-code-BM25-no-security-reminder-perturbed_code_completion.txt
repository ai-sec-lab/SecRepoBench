/* make sure we reference 'js' to avoid compiler warnings */
    js = NULL;

    /* Convert the extracted msgpack object to its string representation */
    switch (v->o.type) {
    case MSGPACK_OBJECT_BOOLEAN:
        if (v->o.via.boolean) {
            tmp = flb_sds_cat_safe(&buf, "true", 4);
        }
        else {
            tmp = flb_sds_cat_safe(&buf, "false", 5);
        }
        break;

    case MSGPACK_OBJECT_POSITIVE_INTEGER:
        str_size = snprintf(str, sizeof(str), "%" PRIu64, v->o.via.u64);
        tmp = flb_sds_cat_safe(&buf, str, str_size);
        break;

    case MSGPACK_OBJECT_NEGATIVE_INTEGER:
        str_size = snprintf(str, sizeof(str), "%" PRId64, v->o.via.i64);
        tmp = flb_sds_cat_safe(&buf, str, str_size);
        break;

#if defined(MSGPACK_OBJECT_FLOAT32)
    case MSGPACK_OBJECT_FLOAT32:
#endif
#if defined(MSGPACK_OBJECT_FLOAT64)
    case MSGPACK_OBJECT_FLOAT64:
#endif
#ifdef MSGPACK_OBJECT_FLOAT
    case MSGPACK_OBJECT_FLOAT:
#endif
        str_size = snprintf(str, sizeof(str), "%.17g", v->o.via.f64);
        tmp = flb_sds_cat_safe(&buf, str, str_size);
        break;

    case MSGPACK_OBJECT_STR:
        tmp = flb_sds_cat_safe(&buf,
                               v->o.via.str.ptr,
                               v->o.via.str.size);
        break;

    case MSGPACK_OBJECT_NIL:
        tmp = flb_sds_cat_safe(&buf, "null", 4);
        break;

    default:
        /* Unsupported / complex types: skip (but silence unused variable) */
        (void) js;
        tmp = buf;
        break;
    }