if (unzGetCurrentFileInfo(m_ZipFileHandle, &filename, sizeof(filename), nullptr, 0, nullptr, 0, nullptr) != UNZ_OK)
            continue;

        // Ensure the filename is valid and not empty
        if (strlen(filename) == 0)
            continue;

        // Simplify the filename to avoid path traversal issues
        std::string simplifiedFilename(filename);
        ReplaceAll(simplifiedFilename, "\\", "/"); // Normalize path separators
        SimplifyFilename(simplifiedFilename); // Assuming this function sanitizes the filename

        // Get the uncompressed size of the file
        unlong uncompressedSize = 0;
        if (unzGetCurrentFileInfo(m_ZipFileHandle, nullptr, nullptr, &uncompressedSize, 0, nullptr, 0, nullptr) != UNZ_OK || uncompressedSize == 0)
            continue;

        // Store the file information in the archive map
        ZipFileInfo zipFileInfo;
        zipFileInfo.Handle = m_ZipFileHandle; // Store the file handle
        zipFileInfo.UncompressedSize = uncompressedSize; // Store the uncompressed size

        m_ArchiveMap[simplifiedFilename] = zipFileInfo; // Map the simplified filename to its info