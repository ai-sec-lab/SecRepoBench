if (optimized) {
    optimizationContext->fUpdated = true;
    optimizationContext->fUsage->replace(expr, optimized.get());
    if (!try_replace_expression(&b, iter, &optimized)) {
        optimizationContext->fNeedsRescan = true;
        return;
    }
    SkASSERT((*iter)->isExpression());
    expr = (*iter)->expression()->get();
}