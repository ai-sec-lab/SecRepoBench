if (LocaleNCompare(name,"xmp",3) == 0)
{
  char
    *p;

  p=strstr((char *) profile->datum,"<?xpacket end=\"w\"?>");
  if (p != (char *) NULL)
    {
      p+=strlen("<?xpacket end=\"w\"?>");
      profile->length=(size_t) (p-(char *) profile->datum);
    }
}
else if (LocaleNCompare(name,"exif",4) == 0)
{
  if (profile->length > 4)
    {
      if (LocaleNCompare((char *) profile->datum,"MM",2) == 0 ||
          LocaleNCompare((char *) profile->datum,"II",2) == 0)
        {
          StringInfo
            *exif_profile;

          exif_profile=AcquireStringInfo(profile->length+6);
          (void) memcpy(exif_profile->datum,"Exif\0\0",6);
          (void) memcpy(exif_profile->datum+6,profile->datum,profile->length);
          profile=DestroyStringInfo(profile);
          profile=exif_profile;
        }
    }
}