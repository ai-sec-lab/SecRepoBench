const char *p;
  size_t length;

  if (LocaleCompare(name,"xmp") == 0) {
    p=strstr((char *) profile->datum,"<?xpacket end=\"w\">");
    if (p != (const char *) NULL) {
      length=(size_t) (p-profile->datum)+21;
      profile->length=length;
      profile->datum=ResizeQuantumMemory(profile->datum,length+1,1);
      if (profile->datum == (unsigned char *) NULL)
        return;
      profile->datum[length]='\0';
    }
  }
  else
    if (LocaleCompare(name,"exif") == 0) {
      if (profile->length >= 6) {
        if (((unsigned char *) profile->datum)[0] == 0xFF) {
          if (((unsigned char *) profile->datum)[1] == 0xD8) {
            length=profile->length+6;
            profile->datum=ResizeQuantumMemory(profile->datum,length+1,1);
            if (profile->datum == (unsigned char *) NULL)
              return;
            memmove(profile->datum+6,profile->datum,profile->length);
            memcpy(profile->datum,"Exif\0\0\0",6);
            profile->length=length;
          }
        }
      }
    }