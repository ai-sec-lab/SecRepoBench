// <MASK>
// Check if the profile is an XMP profile
if (LocaleNCompare((const char *) profile->data, "<?xpacket begin", 14) == 0)
{
    // Find the end of the XMP packet
    const char *end = strstr((const char *) profile->data, "<?xpacket end=\"w\"?>");
    if (end != NULL)
    {
        // Truncate the profile data to the end of the XMP packet
        profile->length = (end + strlen("<?xpacket end=\"w\"?>")) - (const char *) profile->data;
    }
}
// Check if the profile is an EXIF profile
else if (LocaleNCompare((const char *) profile->data, "Exif", 4) != 0)
{
    // Prepend the "Exif" header to the profile data
    StringInfo *new_profile = AcquireStringInfo(profile->length + 4);
    SetStringInfoDatum(new_profile, (const unsigned char *)"Exif");
    AppendStringInfo(new_profile, profile->data, profile->length);
    profile->length = new_profile->length;
    profile->data = new_profile->data;
    new_profile->data = NULL;
    DestroyStringInfo(new_profile);
}