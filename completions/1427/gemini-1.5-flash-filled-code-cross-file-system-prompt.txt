int pixel_size = c->bpp / 8;
    long long video_size_check = (long long)aligned_width * h * pixel_size;
    if (video_size_check > c->video_size)
        return AVERROR_INVALIDDATA;
    if (encoding == 0 && c->palette_size > 0 && c->bpp <= 8)
        avctx->pix_fmt = AV_PIX_FMT_PAL8;
    else if (encoding && c->bpp >= 6 && c->bpp <= 8 && c->palette_size == 768)
        avctx->pix_fmt = AV_PIX_FMT_BGR24;
    else if (encoding == 0 && c->bpp == 24 && c->format == CHUNKY && c->palette_size == 0)
        avctx->pix_fmt = AV_PIX_FMT_RGB24;
    else {
        avpriv_request_sample(avctx, "Pixel format 0x%0x, encoding %d, bpp %d, palette %d", c->format, encoding, c->bpp, c->palette_size);
        return AVERROR_PATCHWELCOME;
    }