// Check if the ESD box is valid before removing it
            if (ptr->esd) {
                // Ensure that we are not trying to remove a NULL pointer
                GF_Box *esd_box = gf_isom_box_find_child(s->child_boxes, GF_ISOM_BOX_TYPE_ESDS);
                if (esd_box) {
                    // Remove the ESD box from the parent box's list of children
                    gf_list_remove(s->child_boxes, esd_box);
                    gf_isom_box_del(esd_box); // Properly delete the box to free memory
                }
            }