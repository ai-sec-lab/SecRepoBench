// Adjust precision to prevent buffer overflow
      if (prec > (buf_remaining - 1)) {
        prec = buf_remaining - 1; // Leave space for null terminator
      }

      // Ensure that we do not exceed the buffer size
      if (num_digits + 1 > buf_remaining) {
        num_digits = buf_remaining - 1; // Leave space for null terminator
      }

      // Fill the buffer with zeros if necessary
      while (num_digits > 0) {
        *s++ = '0';
        num_digits--;
      }