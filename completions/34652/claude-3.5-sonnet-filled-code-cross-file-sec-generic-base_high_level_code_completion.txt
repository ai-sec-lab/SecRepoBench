if (fmt == 'g' && org_fmt == 'g') {
  prec += e - 1;
}
if (prec > (buf_remaining - FLT_MIN_BUF_SIZE)) {
  prec = buf_remaining - FLT_MIN_BUF_SIZE;
}