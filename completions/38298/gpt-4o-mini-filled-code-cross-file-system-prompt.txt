tail = head + len;
  if (tail > alen) {
    len = alen - head;
  }