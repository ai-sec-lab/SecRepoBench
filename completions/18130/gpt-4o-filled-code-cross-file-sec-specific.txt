const double min_value = -1.0e6; // Define a reasonable minimum value
  const double max_value = 1.0e6;  // Define a reasonable maximum value

  if (x < min_value)
    x = min_value;
  else if (x > max_value)
    x = max_value;