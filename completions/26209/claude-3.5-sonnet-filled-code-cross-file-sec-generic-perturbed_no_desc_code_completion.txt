if (mjpegdecodecontext->restart_interval == 0 && mjpegdecodecontext->restart_count == 0) {
        for (int i = 0; i < 4; i++) {
            for (int j = 0; j < 2; j++) {
                if (ff_mjpeg_build_huffman_codes(mjpegdecodecontext->huffman_table_dc[i][j],
                                                 mjpegdecodecontext->huffman_bits_dc[i][j],
                                                 mjpegdecodecontext->huffman_val_dc[i][j]) < 0) {
                    av_log(mjpegdecodecontext->avctx, AV_LOG_ERROR, "Error building Huffman table\n");
                    return AVERROR_INVALIDDATA;
                }
                if (ff_mjpeg_build_huffman_codes(mjpegdecodecontext->huffman_table_ac[i][j],
                                                 mjpegdecodecontext->huffman_bits_ac[i][j],
                                                 mjpegdecodecontext->huffman_val_ac[i][j]) < 0) {
                    av_log(mjpegdecodecontext->avctx, AV_LOG_ERROR, "Error building Huffman table\n");
                    return AVERROR_INVALIDDATA;
                }
            }
        }
    }