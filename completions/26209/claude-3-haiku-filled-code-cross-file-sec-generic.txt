int i, index;
int ret = 0;

for (i = 0; i < 4; i++) {
    int class = ht[i].class;
    int index = ht[i].index;
    int bits = ht[i].bits;
    uint8_t *val = ht[i].values;

    if (class < 2) {
        s->dc_bits[class][index] = bits;
        s->dc_value[class][index] = *val++;
    } else {
        s->ac_bits[class-2][index] = bits;
        s->ac_values[class-2][index] = *val++;
    }

    ret = build_vlc(&s->vlcs[class][index], val, bits, 1 << bits, 0, 0, 0);
    if (ret < 0) {
        av_log(s->avctx, AV_LOG_ERROR, "Error building VLC table %d %d\n", class, index);
        return ret;
    }
}

return 0;