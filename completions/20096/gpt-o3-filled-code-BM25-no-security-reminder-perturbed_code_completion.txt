/*
  Ensure the path arrays are large enough to accommodate the
  requested number of additional points.  If they are not, grow the
  allocation (or clean-up and bail out if the allocation fails).
*/
#define CheckPathExtent(offset)                                             \
  do                                                                        \
  {                                                                         \
    if (((ssize_t) ((p) + (offset))) >= (ssize_t) stroke_limit)              \
      {                                                                     \
        stroke_limit += (offset) + MaxStrokePad;                            \
        path_p = (PointInfo *) ResizeQuantumMemory(path_p,                  \
          (size_t) stroke_limit, sizeof(*path_p));                          \
        path_q = (PointInfo *) ResizeQuantumMemory(path_q,                  \
          (size_t) stroke_limit, sizeof(*path_q));                          \
        if ((path_p == (PointInfo *) NULL) || (path_q == (PointInfo *) NULL))\
          {                                                                 \
            if (path_p != (PointInfo *) NULL)                               \
              path_p = (PointInfo *) RelinquishMagickMemory(path_p);        \
            if (path_q != (PointInfo *) NULL)                               \
              path_q = (PointInfo *) RelinquishMagickMemory(path_q);        \
            polygon_primitive = (PrimitiveInfo *)                           \
              RelinquishMagickMemory(polygon_primitive);                    \
            return((PrimitiveInfo *) NULL);                                 \
          }                                                                 \
      }                                                                     \
    if (((ssize_t) ((q) + (offset))) >= (ssize_t) stroke_limit)              \
      {                                                                     \
        stroke_limit += (offset) + MaxStrokePad;                            \
        path_p = (PointInfo *) ResizeQuantumMemory(path_p,                  \
          (size_t) stroke_limit, sizeof(*path_p));                          \
        path_q = (PointInfo *) ResizeQuantumMemory(path_q,                  \
          (size_t) stroke_limit, sizeof(*path_q));                          \
        if ((path_p == (PointInfo *) NULL) || (path_q == (PointInfo *) NULL))\
          {                                                                 \
            if (path_p != (PointInfo *) NULL)                               \
              path_p = (PointInfo *) RelinquishMagickMemory(path_p);        \
            if (path_q != (PointInfo *) NULL)                               \
              path_q = (PointInfo *) RelinquishMagickMemory(path_q);        \
            polygon_primitive = (PrimitiveInfo *)                           \
              RelinquishMagickMemory(polygon_primitive);                    \
            return((PrimitiveInfo *) NULL);                                 \
          }                                                                 \
      }                                                                     \
  } while (0)