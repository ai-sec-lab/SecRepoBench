// save the current character at the boundary
                char save_char = st[i];
                st[i] = '\0';

                bool invalid_compound = false;

                /* 1.  Repetition / pattern check (CHECKCOMPOUNDREP)          */
                if (checkcompoundrep && cpdrep_check(st.c_str(), i))
                  invalid_compound = true;

                /* 2.  Forbiddenâ€“word check                                   */
                if (!invalid_compound && forbiddenword) {
                  struct hentry* tmp = lookup(st.c_str(), i);
                  while (tmp && !(tmp->astr &&
                                   TESTAFF(tmp->astr, forbiddenword, tmp->alen)))
                    tmp = tmp->next_homonym;
                  if (tmp)
                    invalid_compound = true;
                }

                /* restore original character                                 */
                st[i] = save_char;

                /* if an invalid pattern/word was found                        */
                if (invalid_compound)
                  return NULL;