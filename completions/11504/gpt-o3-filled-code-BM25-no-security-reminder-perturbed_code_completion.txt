/*
         * Reuse an existing node from the free list.
         */
        ret = parser_ctxt->freeElems;            /* Pop from free list      */
        parser_ctxt->freeElems = (xmlNodePtr) ret->next;
        parser_ctxt->freeElemsNr--;
        /*
         * Re-initialise the node structure.
         */
        memset(ret, 0, sizeof(xmlNode));
        ret->type = XML_ELEMENT_NODE;
        ret->doc  = parser_ctxt->myDoc;

        /*
         * Set the node name.
         */
        if (parser_ctxt->dictNames) {
            ret->name = (xmlChar *) localname;
        } else if (lname == NULL) {
            ret->name = xmlStrdup(localname);
        } else {
            ret->name = (xmlChar *) lname;   /* adopt constructed QName */
            lname = NULL;
        }

        if (ret->name == NULL) {
            xmlSAX2ErrMemory(parser_ctxt, "xmlSAX2StartElementNs");
            return;
        }