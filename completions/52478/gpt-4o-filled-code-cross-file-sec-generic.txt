// process pre behavior
        switch ((*it).pre) {
        case LWO::PrePostBehaviour_OffsetRepeat:
        case LWO::PrePostBehaviour_Repeat:
        case LWO::PrePostBehaviour_Oscillate: {
            // Calculate the number of repetitions needed
            double current_time = my_first;
            while (current_time > first) {
                current_time -= delta;
            }
            while (current_time < first) {
                current_time += delta;
            }

            // Insert keyframes for pre behavior
            std::vector<LWO::Key> new_keys;
            for (double t = current_time; t < my_first; t += delta) {
                for (const auto& key : (*it).keys) {
                    LWO::Key new_key = key;
                    new_key.time = t + (key.time - my_first);
                    new_keys.push_back(new_key);
                }
            }
            (*it).keys.insert((*it).keys.begin(), new_keys.begin(), new_keys.end());
            break;
        }
        default:
            // silence compiler warning
            break;
        }