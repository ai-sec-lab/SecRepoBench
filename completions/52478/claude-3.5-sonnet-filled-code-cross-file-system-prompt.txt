// process pre behavior
switch ((*it).pre) {
    case LWO::PrePostBehaviour_OffsetRepeat:
    case LWO::PrePostBehaviour_Repeat:
    case LWO::PrePostBehaviour_Oscillate:
        {
            const double value_delta = (*it).keys.back().value - (*it).keys.front().value;
            size_t insert_count = 0;
            double current_time = my_first;

            while (current_time > first) {
                LWO::Key new_key = (*it).keys.front();
                new_key.time = current_time;

                switch ((*it).pre) {
                    case LWO::PrePostBehaviour_OffsetRepeat:
                        new_key.value -= (++insert_count) * value_delta;
                        break;
                    case LWO::PrePostBehaviour_Repeat:
                        new_key.value = (*it).keys[insert_count % (*it).keys.size()].value;
                        break;
                    case LWO::PrePostBehaviour_Oscillate:
                        new_key.value = (insert_count & 1) ? (*it).keys.back().value : (*it).keys.front().value;
                        break;
                }

                (*it).keys.push_front(new_key);
                current_time -= delta;
            }
        }
        break;

    default:
        // silence compiler warning
        break;
}