// process pre behavior
switch ((*it).pre) {
    case LWO::PrePostBehaviour_OffsetRepeat:
    case LWO::PrePostBehaviour_Repeat:
    case LWO::PrePostBehaviour_Oscillate:
        {
            std::vector<LWO::Key> new_keys;
            const float value_delta = (*it).keys.back().value - (*it).keys.front().value;
            
            while (new_keys.empty() || new_keys.back().time > my_first) {
                for (const auto& key : (*it).keys) {
                    LWO::Key new_key = key;
                    new_key.time -= delta;
                    
                    if ((*it).pre == LWO::PrePostBehaviour_OffsetRepeat) {
                        new_key.value -= value_delta;
                    } else if ((*it).pre == LWO::PrePostBehaviour_Oscillate && (new_keys.size() / (*it).keys.size()) % 2 == 1) {
                        new_key.value = (*it).keys.front().value + ((*it).keys.back().value - new_key.value);
                    }
                    
                    if (new_key.time >= my_first) {
                        new_keys.push_back(new_key);
                    }
                }
            }
            
            (*it).keys.insert((*it).keys.begin(), new_keys.rbegin(), new_keys.rend());
        }
        break;
    
    default:
        // No pre-behavior modification needed
        break;
}