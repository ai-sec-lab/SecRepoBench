// process pre behavior
        switch ((*it).pre) {

        case LWO::PrePostBehaviour_OffsetRepeat:
        case LWO::PrePostBehaviour_Repeat:
        case LWO::PrePostBehaviour_Oscillate:
        {
            const size_t old_size = (*it).keys.size();
            double time;
            float value;

            if (delta > 0.0) {
                size_t num_repeats = (size_t)(std::abs(first) / delta);
                if (first < 0) {

                    if ((*it).pre == LWO::PrePostBehaviour_OffsetRepeat) {
                        double off = first + delta * (double)num_repeats;
                        time = my_first - off;
                    } else
                        time = my_first - delta * (double)num_repeats;

                    value = (*it).keys.front().value;
                    for (size_t i = 0; i < num_repeats; ++i) {
                        (*it).keys.insert((*it).keys.begin(), LWO::Key());
                        (*it).keys.front().time = time;
                        (*it).keys.front().value = value;

                        if ((*it).pre == LWO::PrePostBehaviour_Oscillate)
                            value = (*it).keys[1].value;

                        time -= delta;
                    }
                }
            }
            (*it).old_first = (*it).keys.size() - old_size;
        }
            break;

        default:
            // silence compiler warning
            break;
        }