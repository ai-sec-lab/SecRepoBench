// process pre behavior
        switch ((*it).pre) {
        case LWO::PrePostBehaviour_OffsetRepeat:
        case LWO::PrePostBehaviour_Repeat:
        case LWO::PrePostBehaviour_Oscillate:
            {
                // Calculate the number of repetitions needed
                double range_start = first;
                double range_end = last;
                double range_delta = range_end - range_start;

                if (range_delta > 0.0) {
                    int num_repeats = static_cast<int>(range_delta / delta);
                    for (int i = 0; i < num_repeats; ++i) {
                        for (const auto& key : (*it).keys) {
                            LWO::Key new_key = key;
                            new_key.time += (i + 1) * delta;
                            (*it).keys.push_back(new_key);
                        }
                    }
                }
            }
            break;

        default:
            // silence compiler warning
            break;
        }