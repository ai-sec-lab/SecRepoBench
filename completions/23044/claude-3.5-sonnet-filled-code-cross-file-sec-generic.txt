const unsigned char *a = CAST(const unsigned char *, s1);
const unsigned char *b = CAST(const unsigned char *, s2);
const unsigned char *eb = b + maxlen;

if (flags & (STRING_COMPACT_WHITESPACE | STRING_COMPACT_OPTIONAL_WHITESPACE)) {
    while (b < eb && isspace(*b))
        b++;
}