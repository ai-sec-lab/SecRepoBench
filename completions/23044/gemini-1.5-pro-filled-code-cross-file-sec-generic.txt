const unsigned char *a = (const unsigned char *)s1;
	const unsigned char *b = (const unsigned char *)s2;
	const unsigned char *eb;
	if (flags & (STRING_COMPACT_WHITESPACE|STRING_COMPACT_OPTIONAL_WHITESPACE)) {
		size_t i;

		for (i = 0; i < maxlen; i++)
			if (!isspace(s2[i]))
				break;
		if (i == maxlen)
			eb = b;
		else
			eb = b + i + len;
	}
	else
		eb = b + len;