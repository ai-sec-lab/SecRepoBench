const unsigned char *a = (const unsigned char *)s1;
	const unsigned char *b = (const unsigned char *)s2;
	const unsigned char *eb = b + maxlen;

	if (flags & STRING_COMPACT_WHITESPACE) {
		while (len-- > 0) {
			if (isspace(*a)) {
				a++;
				continue;
			}
			if (b >= eb) {
				v = 1;
				break;
			}
			if ((v = *b++ - *a++) != '\0')
				break;
		}
	} else {
		eb = b + len;
	}