const unsigned char *a = (const unsigned char *)s1;
	const unsigned char *b = (const unsigned char *)s2;
	const unsigned char *eb = b + maxlen; // Set endpoint for b

	// Validate input parameters
	if (len == 0 || maxlen == 0) {
		return 0; // If length is zero, return 0
	}

	// Ensure that the length does not exceed the maximum length
	if (len > maxlen) {
		len = maxlen; // Adjust len to maxlen if it exceeds
	}

	// Initialize endpoint for b based on whitespace flags
	if (flags & (STRING_COMPACT_WHITESPACE | STRING_COMPACT_OPTIONAL_WHITESPACE)) {
		eb = b + len; // Set endpoint for b based on the length
	}

	// Perform the string comparison
	while (len-- > 0) {
		if (b >= eb) {
			v = 1; // If b exceeds the endpoint, set v to 1
			break;
		}
		if ((v = *b++ - *a++) != '\0') {
			break; // If characters differ, break the loop
		}
	}