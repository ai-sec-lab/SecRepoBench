const unsigned char *a = (const unsigned char *)s1;
	const unsigned char *b = (const unsigned char *)s2;
	const unsigned char *eb = b + maxlen;
	if (flags & (STRING_COMPACT_WHITESPACE|STRING_COMPACT_OPTIONAL_WHITESPACE))
		eb = (const unsigned char *)strchr((const char *)b, '\0');
	if (eb == NULL || eb > b + maxlen)
		eb = b + maxlen;