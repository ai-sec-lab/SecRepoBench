const unsigned char *a = (const unsigned char *)s1;
	const unsigned char *b = (const unsigned char *)s2;
	const unsigned char *eb = b + maxlen;
	if (flags & (STRING_COMPACT_WHITESPACE|STRING_COMPACT_OPTIONAL_WHITESPACE)) {
		/*
		 * Note: the "maxlen" limit is not applied when compacting
		 * whitespace because the caller has no idea how much
		 * whitespace is being compacted here
		 */
		if (flags & STRING_COMPACT_WHITESPACE) {
			while (isspace(*b))
				b++;
			eb = b + maxlen;
		}
		else {
			while (isspace(*b)) {
				if (maxlen-- == 0)
					break;
				b++;
			}
			eb = b + maxlen;
		}
	}