// Calculate the denominator for linear interpolation between two segments.
    double denom = arrayZ[i].fromCoord - arrayZ[i-1].fromCoord;
    if (denom == 0) {
        // Handle the case where the denominator is zero to avoid division by zero.
        // This should not happen in a well-formed mapping array, but it's good to be safe.
        denom = 1;
    }