// Calculate the tail index by adding head and len.
// If the array length is less than len or tail, adjust len to fit within the array bounds.