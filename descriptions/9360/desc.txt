// Extract named macro from a sequence of tokens.
// This includes handling nested push/pop constructs, skipping comments, and storing the macro between matching push/pop tokens.
// The macro is identified by a name, and the actual macro content is stored in a splay tree for later retrieval.