// Extract a size value from the beginning of the payload, adjust the payload pointer to skip this size field,
// and compute the data size. If the type is VALUE_DATA, make a further adjustment to the size.
// Ensure the extracted size is valid and within the remaining payload length.
// Update the value size in the structure accordingly and compute the return size.