// Ensure that the garbage collector is in generational mode.
// If a major GC cycle is in progress (gc->full), complete any
// remaining GC work using incremental_gc_finish.
// Regardless of the state, prepare to sweep the dead objects
// and reset all live objects to white by temporarily disabling
// generational mode and performing an incremental GC sweep.
// After sweeping, restore generational mode and clear the gray
// object lists since they have already been painted white.