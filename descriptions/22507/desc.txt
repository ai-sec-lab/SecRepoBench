// This code block handles the formatting of floating-point numbers in different formats
// (such as 'f', 'g', 'G', 'e', 'E', 'a', 'A') for the `sprintf` function.
// It retrieves the next argument, converts it to a floating-point value, and checks for special cases like NaN and Inf.
// Depending on format flags, it adjusts for width, precision, and signs.
// The `fmt_setup` function is used to create a format string for the floating-point number.
// The formatted result is appended to the output buffer, and necessary checks are performed to ensure the buffer size is sufficient.